{
  "version": 3,
  "sources": ["../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/index.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/PromptingWorkflow.tsx", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/utils/tokenEstimator.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/PromptSelector.module.css", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/PromptSelector.tsx", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/AttachmentManager.tsx", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/AttachmentDropZone.tsx", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/utils/languageMap.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/utils/fileContentExtractor.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/AttachmentDropZone.module.css", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/PasteTextModal.tsx", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/utils/filenameGenerator.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/hooks/useClipboard.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/PasteTextModal.module.css", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/AttachmentManager.module.css", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/WorkflowMeta.tsx", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/WorkflowMeta.module.css", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/ExportMenu.tsx", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/ExportMenu.module.css", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/PasteFinalResultModal.tsx", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/PasteFinalResultModal.module.css", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/hooks/useWorkflow.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/hooks/useFileHandlers.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/utils/prompts.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/utils/exportFormatter.ts", "../../../widgets/@coderef-dashboard/widget-prompting-workflow/src/components/PromptingWorkflow.module.css"],
  "sourcesContent": ["/**\r\n * Prompting Workflow Widget - Main Entry Point\r\n *\r\n * This widget enables users to:\r\n * 1. Select from 3 preloaded LLM prompts (Code Review, Synthesize, Consolidate)\r\n * 2. Attach code/text files via drag & drop or paste\r\n * 3. View comprehensive metadata (tokens, files, languages)\r\n * 4. Copy JSON to clipboard for LLM consumption\r\n * 5. Export as .json or .md files\r\n * 6. Paste final LLM result and save workflow\r\n */\r\n\r\nimport React from 'react';\r\nimport { PromptingWorkflow } from './components/PromptingWorkflow';\r\n\r\n/**\r\n * IScriptboardWidget interface\r\n * Defines the contract for all dashboard widgets\r\n */\r\ninterface IScriptboardWidget {\r\n  id: string;\r\n  name: string;\r\n  version: string;\r\n  description?: string;\r\n  settings?: Record<string, any>;\r\n  render(): React.ReactNode;\r\n  onEnable?(): Promise<void>;\r\n  onDisable?(): Promise<void>;\r\n  onSettingsChange?(settings: any): Promise<void>;\r\n  onError?(error: Error): boolean;\r\n}\r\n\r\n// Export all components\r\nexport { PromptingWorkflow } from './components/PromptingWorkflow';\r\nexport { PromptSelector } from './components/PromptSelector';\r\nexport { AttachmentDropZone } from './components/AttachmentDropZone';\r\nexport { AttachmentManager } from './components/AttachmentManager';\r\nexport { PasteTextModal } from './components/PasteTextModal';\r\nexport { WorkflowMeta } from './components/WorkflowMeta';\r\nexport { ExportMenu } from './components/ExportMenu';\r\nexport { PasteFinalResultModal } from './components/PasteFinalResultModal';\r\n\r\n// Export all types\r\nexport type { Attachment, PreloadedPrompt, Workflow, WorkflowSession, WorkflowExport } from './types';\r\n\r\n// Export all utilities\r\nexport { readFileContent } from './utils/fileContentExtractor';\r\nexport { languageMap, getLanguage } from './utils/languageMap';\r\nexport {\r\n  estimateTokens,\r\n  estimatePromptTokens,\r\n  calculateTotalTokens,\r\n  formatTokenCount,\r\n  shouldWarnTokens,\r\n  getTokenWarning,\r\n} from './utils/tokenEstimator';\r\nexport { generateClipboardFilename, generateUniqueFilename, getNextClipboardNumber } from './utils/filenameGenerator';\r\nexport { PRELOADED_PROMPTS, getPrompt, getAllPrompts } from './utils/prompts';\r\nexport { generateJSON, generateMarkdown } from './utils/exportFormatter';\r\n\r\n// Export all hooks\r\nexport { useWorkflow } from './hooks/useWorkflow';\r\nexport { useClipboard } from './hooks/useClipboard';\r\nexport { useFileHandlers } from './hooks/useFileHandlers';\r\n\r\n/**\r\n * Widget implementation for dashboard integration\r\n * Implements IScriptboardWidget interface required by the widget loader\r\n */\r\nconst PromptingWorkflowWidget: IScriptboardWidget = {\r\n  id: 'prompting-workflow',\r\n  name: 'Prompting Workflow',\r\n  version: '1.0.0',\r\n  description: 'LLM prompting workflow with file attachments, metadata display, and export functionality',\r\n\r\n  render(): React.ReactNode {\r\n    return React.createElement(PromptingWorkflow);\r\n  },\r\n\r\n  async onEnable(): Promise<void> {\r\n    // Initialize widget resources if needed\r\n    console.log('Prompting Workflow Widget enabled');\r\n  },\r\n\r\n  async onDisable(): Promise<void> {\r\n    // Clean up resources\r\n    console.log('Prompting Workflow Widget disabled');\r\n  },\r\n\r\n  onError(error: Error): boolean {\r\n    // Log widget errors\r\n    console.error('Prompting Workflow Widget error:', error);\r\n    return true; // Return true to suppress error propagation\r\n  },\r\n};\r\n\r\nexport default PromptingWorkflowWidget;\r\n", "import React, { useState, useCallback } from 'react';\r\nimport { PromptSelector } from './PromptSelector';\r\nimport { AttachmentManager } from './AttachmentManager';\r\nimport { WorkflowMeta } from './WorkflowMeta';\r\nimport { ExportMenu } from './ExportMenu';\r\nimport { PasteFinalResultModal } from './PasteFinalResultModal';\r\nimport { useWorkflow } from '../hooks/useWorkflow';\r\nimport { useClipboard } from '../hooks/useClipboard';\r\nimport { useFileHandlers } from '../hooks/useFileHandlers';\r\nimport { getAllPrompts } from '../utils/prompts';\r\nimport { generateJSON, generateMarkdown } from '../utils/exportFormatter';\r\nimport styles from './PromptingWorkflow.module.css';\r\n\r\n/**\r\n * PromptingWorkflow - Main widget container\r\n * Orchestrates entire workflow: prompt selection \u2192 attachments \u2192 export \u2192 save\r\n */\r\nexport const PromptingWorkflow: React.FC = () => {\r\n  const prompts = getAllPrompts();\r\n  const {\r\n    workflow,\r\n    setSelectedPrompt,\r\n    addAttachments,\r\n    removeAttachment,\r\n    clearAttachments,\r\n    setFinalResult,\r\n  } = useWorkflow();\r\n  const { write: copyToClipboard } = useClipboard();\r\n  const { selectDirectory } = useFileHandlers();\r\n  const [showPasteFinalResult, setShowPasteFinalResult] = useState(false);\r\n\r\n  // Validate workflow ready for export\r\n  const isReadyForExport = workflow.selectedPrompt && workflow.attachments.length > 0;\r\n\r\n  const handleCopyJSON = useCallback(async () => {\r\n    if (!isReadyForExport) {\r\n      alert('Please select a prompt and add attachments');\r\n      return;\r\n    }\r\n\r\n    const json = generateJSON(workflow);\r\n    const success = await copyToClipboard(json);\r\n    if (!success) {\r\n      throw new Error('Failed to copy to clipboard');\r\n    }\r\n  }, [workflow, isReadyForExport, copyToClipboard]);\r\n\r\n  const handleExportJSON = useCallback(async () => {\r\n    if (!isReadyForExport) {\r\n      alert('Please select a prompt and add attachments');\r\n      return;\r\n    }\r\n\r\n    const directory = await selectDirectory();\r\n    if (!directory) return;\r\n\r\n    const json = generateJSON(workflow);\r\n    const filename = `workflow_${workflow.selectedPrompt?.name}_${Date.now()}.json`;\r\n\r\n    // In a real implementation, use CodeRefCore.api.storage to save\r\n    console.log(`Would save to: ${directory}/${filename}`);\r\n    console.log('JSON:', json);\r\n\r\n    // For now, trigger browser download fallback\r\n    const blob = new Blob([json], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  }, [workflow, isReadyForExport, selectDirectory]);\r\n\r\n  const handleExportMarkdown = useCallback(async () => {\r\n    if (!isReadyForExport) {\r\n      alert('Please select a prompt and add attachments');\r\n      return;\r\n    }\r\n\r\n    const directory = await selectDirectory();\r\n    if (!directory) return;\r\n\r\n    const markdown = generateMarkdown(workflow);\r\n    const filename = `workflow_${workflow.selectedPrompt?.name}_${Date.now()}.md`;\r\n\r\n    // In a real implementation, use CodeRefCore.api.storage to save\r\n    console.log(`Would save to: ${directory}/${filename}`);\r\n    console.log('Markdown:', markdown);\r\n\r\n    // For now, trigger browser download fallback\r\n    const blob = new Blob([markdown], { type: 'text/markdown' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  }, [workflow, isReadyForExport, selectDirectory]);\r\n\r\n  const handleFinalResultSaved = useCallback(\r\n    async (result: string) => {\r\n      setFinalResult(result);\r\n\r\n      // Optionally save workflow to browser storage or user-selected directory\r\n      const shouldSaveWorkflow = confirm(\r\n        'Save this workflow to local storage for later retrieval?'\r\n      );\r\n      if (shouldSaveWorkflow) {\r\n        const directory = await selectDirectory();\r\n        if (directory) {\r\n          const json = generateJSON({ ...workflow, finalResult: result });\r\n          const filename = `session_${Date.now()}.json`;\r\n          console.log(`Would save to: ${directory}/${filename}`);\r\n\r\n          // Trigger browser download\r\n          const blob = new Blob([json], { type: 'application/json' });\r\n          const url = URL.createObjectURL(blob);\r\n          const a = document.createElement('a');\r\n          a.href = url;\r\n          a.download = filename;\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          document.body.removeChild(a);\r\n          URL.revokeObjectURL(url);\r\n        }\r\n      }\r\n    },\r\n    [workflow, setFinalResult, selectDirectory]\r\n  );\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.header}>\r\n        <h1 className={styles.title}>Prompting Workflow</h1>\r\n        <p className={styles.subtitle}>\r\n          Select a prompt, attach files, review metadata, and export for LLM analysis\r\n        </p>\r\n      </div>\r\n\r\n      <div className={styles.content}>\r\n        {/* Prompt Selection */}\r\n        <PromptSelector\r\n          prompts={prompts}\r\n          selectedPromptKey={workflow.selectedPrompt?.key}\r\n          onSelectPrompt={setSelectedPrompt}\r\n        />\r\n\r\n        {/* Attachment Management */}\r\n        <AttachmentManager\r\n          attachments={workflow.attachments}\r\n          onAddAttachments={addAttachments}\r\n          onRemoveAttachment={removeAttachment}\r\n          onClearAll={clearAttachments}\r\n        />\r\n\r\n        {/* Workflow Metadata */}\r\n        <WorkflowMeta prompt={workflow.selectedPrompt} attachments={workflow.attachments} />\r\n\r\n        {/* Export Actions */}\r\n        <div className={styles.exportSection}>\r\n          <h2 className={styles.sectionTitle}>Export</h2>\r\n          <ExportMenu\r\n            onCopyJSON={handleCopyJSON}\r\n            onExportJSON={handleExportJSON}\r\n            onExportMarkdown={handleExportMarkdown}\r\n            disabled={!isReadyForExport}\r\n          />\r\n\r\n          {!isReadyForExport && (\r\n            <p className={styles.warningText}>\r\n              \u26A0\uFE0F Select a prompt and add at least one attachment to enable export\r\n            </p>\r\n          )}\r\n\r\n          {isReadyForExport && (\r\n            <button\r\n              className={styles.pasteResultButton}\r\n              onClick={() => setShowPasteFinalResult(true)}\r\n            >\r\n              \uD83D\uDCDD Paste Final LLM Result\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Paste Final Result Modal */}\r\n      <PasteFinalResultModal\r\n        isOpen={showPasteFinalResult}\r\n        onResultSaved={handleFinalResultSaved}\r\n        onClose={() => setShowPasteFinalResult(false)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n", "/**\r\n * Estimate token count from text content\r\n * Uses conservative formula: char_count / 4 \u2248 tokens (\u00B115% accuracy)\r\n * Most LLMs tokenize at roughly 1 token per 4 characters\r\n */\r\nexport function estimateTokens(content: string): number {\r\n  if (!content) return 0;\r\n  return Math.ceil(content.length / 4);\r\n}\r\n\r\n/**\r\n * Estimate tokens for a prompt and its estimated size\r\n */\r\nexport function estimatePromptTokens(promptText: string): number {\r\n  return estimateTokens(promptText);\r\n}\r\n\r\n/**\r\n * Calculate total token count for workflow\r\n */\r\nexport function calculateTotalTokens(promptTokens: number, attachmentTokens: number[]): number {\r\n  const attachmentTotal = attachmentTokens.reduce((sum, tokens) => sum + tokens, 0);\r\n  return promptTokens + attachmentTotal;\r\n}\r\n\r\n/**\r\n * Format token count for display\r\n */\r\nexport function formatTokenCount(tokens: number): string {\r\n  if (tokens < 1000) {\r\n    return `~${tokens}`;\r\n  } else if (tokens < 1000000) {\r\n    return `~${(tokens / 1000).toFixed(1)}K`;\r\n  } else {\r\n    return `~${(tokens / 1000000).toFixed(1)}M`;\r\n  }\r\n}\r\n\r\n/**\r\n * Check if token count exceeds warning threshold\r\n */\r\nexport function shouldWarnTokens(tokens: number): boolean {\r\n  return tokens > 100000;\r\n}\r\n\r\n/**\r\n * Get warning message for token count\r\n */\r\nexport function getTokenWarning(tokens: number): string | null {\r\n  if (tokens > 150000) {\r\n    return `\u26A0\uFE0F Token count ${formatTokenCount(tokens)} exceeds recommended limit (100K). LLM may struggle with this context.`;\r\n  }\r\n  if (tokens > 100000) {\r\n    return `\u26A0\uFE0F Token count ${formatTokenCount(tokens)} exceeds recommended limit (100K). Consider splitting attachments.`;\r\n  }\r\n  return null;\r\n}\r\n", ".container {\r\n  padding: 24px;\r\n  background: #1a1a1a;\r\n  border-radius: 8px;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.title {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0 0 8px 0;\r\n}\r\n\r\n.subtitle {\r\n  font-size: 14px;\r\n  color: #888888;\r\n  margin: 0 0 20px 0;\r\n}\r\n\r\n.promptGrid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\r\n  gap: 16px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.promptCard {\r\n  padding: 16px;\r\n  background: #242424;\r\n  border: 2px solid #333333;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  text-align: left;\r\n  font-family: inherit;\r\n}\r\n\r\n.promptCard:hover {\r\n  border-color: #FF6B00;\r\n  background: #2a2a2a;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.promptCard.selected {\r\n  border-color: #FF6B00;\r\n  background: #2a2a2a;\r\n  box-shadow: 0 0 12px rgba(255, 107, 0, 0.3);\r\n}\r\n\r\n.promptHeader {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.promptName {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0;\r\n  flex: 1;\r\n}\r\n\r\n.tokenBadge {\r\n  background: #FF6B00;\r\n  color: #ffffff;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  white-space: nowrap;\r\n  margin-left: 8px;\r\n}\r\n\r\n.promptDescription {\r\n  font-size: 13px;\r\n  color: #aaaaaa;\r\n  margin: 0 0 12px 0;\r\n  line-height: 1.4;\r\n}\r\n\r\n.promptMeta {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 11px;\r\n  color: #666666;\r\n}\r\n\r\n.promptKey {\r\n  font-weight: 500;\r\n  color: #888888;\r\n}\r\n\r\n.tokenCount {\r\n  color: #FF6B00;\r\n  font-weight: 500;\r\n}\r\n\r\n.selectedInfo {\r\n  padding: 12px 16px;\r\n  background: rgba(255, 107, 0, 0.1);\r\n  border-left: 3px solid #FF6B00;\r\n  border-radius: 4px;\r\n}\r\n\r\n.selectedText {\r\n  margin: 0;\r\n  font-size: 14px;\r\n  color: #ffffff;\r\n}\r\n", "import React from 'react';\r\nimport { PreloadedPrompt } from '../types';\r\nimport { formatTokenCount } from '../utils/tokenEstimator';\r\nimport styles from './PromptSelector.module.css';\r\n\r\ninterface PromptSelectorProps {\r\n  prompts: PreloadedPrompt[];\r\n  selectedPromptKey?: string;\r\n  onSelectPrompt: (prompt: PreloadedPrompt) => void;\r\n}\r\n\r\n/**\r\n * PromptSelector - Browse and select from 3 preloaded prompts\r\n * Displays prompt name, description, and estimated tokens\r\n */\r\nexport const PromptSelector: React.FC<PromptSelectorProps> = ({\r\n  prompts,\r\n  selectedPromptKey,\r\n  onSelectPrompt,\r\n}) => {\r\n  return (\r\n    <div className={styles.container}>\r\n      <h2 className={styles.title}>Select Prompt</h2>\r\n      <p className={styles.subtitle}>Choose an analysis workflow</p>\r\n\r\n      <div className={styles.promptGrid}>\r\n        {prompts.map((prompt) => (\r\n          <button\r\n            key={prompt.key}\r\n            className={`${styles.promptCard} ${\r\n              selectedPromptKey === prompt.key ? styles.selected : ''\r\n            }`}\r\n            onClick={() => onSelectPrompt(prompt)}\r\n            type=\"button\"\r\n          >\r\n            <div className={styles.promptHeader}>\r\n              <h3 className={styles.promptName}>{prompt.label}</h3>\r\n              <span className={styles.tokenBadge}>\r\n                {formatTokenCount(prompt.estimatedTokens)}\r\n              </span>\r\n            </div>\r\n            <p className={styles.promptDescription}>{prompt.description}</p>\r\n            <div className={styles.promptMeta}>\r\n              <span className={styles.promptKey}>Prompt {prompt.key}</span>\r\n              <span className={styles.tokenCount}>\r\n                ~{prompt.estimatedTokens.toLocaleString()} tokens\r\n              </span>\r\n            </div>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {selectedPromptKey && (\r\n        <div className={styles.selectedInfo}>\r\n          <p className={styles.selectedText}>\r\n            Selected: <strong>{prompts.find((p) => p.key === selectedPromptKey)?.label}</strong>\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n", "import React, { useState, useCallback } from 'react';\r\nimport { Attachment } from '../types';\r\nimport { AttachmentDropZone } from './AttachmentDropZone';\r\nimport { PasteTextModal } from './PasteTextModal';\r\nimport { formatTokenCount } from '../utils/tokenEstimator';\r\nimport styles from './AttachmentManager.module.css';\r\n\r\ninterface AttachmentManagerProps {\r\n  attachments: Attachment[];\r\n  onAddAttachments: (attachments: Attachment[]) => void;\r\n  onRemoveAttachment: (id: string) => void;\r\n  onClearAll: () => void;\r\n}\r\n\r\n/**\r\n * AttachmentManager - Coordinator for file and text attachments\r\n * Manages drag & drop, paste text, and attachment list display\r\n */\r\nexport const AttachmentManager: React.FC<AttachmentManagerProps> = ({\r\n  attachments,\r\n  onAddAttachments,\r\n  onRemoveAttachment,\r\n  onClearAll,\r\n}) => {\r\n  const [showPasteModal, setShowPasteModal] = useState(false);\r\n\r\n  const existingFilenames = attachments.map((a) => a.filename);\r\n\r\n  const handleTextAdded = useCallback(\r\n    (attachment: Attachment) => {\r\n      onAddAttachments([attachment]);\r\n    },\r\n    [onAddAttachments]\r\n  );\r\n\r\n  const totalSize = attachments.reduce((sum, a) => sum + a.size, 0);\r\n  const totalTokens = Math.ceil(\r\n    attachments.reduce((sum, a) => sum + (a.content?.length || 0), 0) / 4\r\n  );\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h2 className={styles.title}>Attachments</h2>\r\n\r\n      <AttachmentDropZone onFilesAdded={onAddAttachments} disabled={false} />\r\n\r\n      <div className={styles.actions}>\r\n        <button\r\n          className={styles.pasteButton}\r\n          onClick={() => setShowPasteModal(true)}\r\n          type=\"button\"\r\n        >\r\n          + Paste Text\r\n        </button>\r\n        {attachments.length > 0 && (\r\n          <button className={styles.clearButton} onClick={onClearAll} type=\"button\">\r\n            Clear All\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {attachments.length > 0 && (\r\n        <div className={styles.summary}>\r\n          <div className={styles.summaryItem}>\r\n            <span className={styles.summaryLabel}>Files:</span>\r\n            <span className={styles.summaryValue}>{attachments.length}</span>\r\n          </div>\r\n          <div className={styles.summaryItem}>\r\n            <span className={styles.summaryLabel}>Size:</span>\r\n            <span className={styles.summaryValue}>\r\n              {(totalSize / 1024).toFixed(1)} KB\r\n            </span>\r\n          </div>\r\n          <div className={styles.summaryItem}>\r\n            <span className={styles.summaryLabel}>Tokens:</span>\r\n            <span className={styles.summaryValue}>\r\n              {formatTokenCount(totalTokens)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {attachments.length > 0 && (\r\n        <div className={styles.attachmentList}>\r\n          <h3 className={styles.listTitle}>Attached Files</h3>\r\n          {attachments.map((attachment) => (\r\n            <div key={attachment.id} className={styles.attachmentItem}>\r\n              <div className={styles.attachmentHeader}>\r\n                <span className={styles.attachmentIcon}>\r\n                  {attachment.type === 'IMAGE' ? '\uD83D\uDDBC\uFE0F' : '\uD83D\uDCC4'}\r\n                </span>\r\n                <div className={styles.attachmentInfo}>\r\n                  <p className={styles.attachmentName}>{attachment.filename}</p>\r\n                  <p className={styles.attachmentMeta}>\r\n                    {(attachment.size / 1024).toFixed(1)} KB\r\n                    {attachment.language && ` \u2022 ${attachment.language}`}\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  className={styles.removeButton}\r\n                  onClick={() => onRemoveAttachment(attachment.id)}\r\n                  title=\"Remove attachment\"\r\n                >\r\n                  \u2715\r\n                </button>\r\n              </div>\r\n              {attachment.preview && (\r\n                <div className={styles.attachmentPreview}>\r\n                  <p>{attachment.preview}...</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <PasteTextModal\r\n        isOpen={showPasteModal}\r\n        existingFilenames={existingFilenames}\r\n        onTextAdded={handleTextAdded}\r\n        onClose={() => setShowPasteModal(false)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n", "import React, { useState, useCallback } from 'react';\r\nimport { Attachment } from '../types';\r\nimport { readFileContent } from '../utils/fileContentExtractor';\r\nimport styles from './AttachmentDropZone.module.css';\r\n\r\ninterface AttachmentDropZoneProps {\r\n  onFilesAdded: (attachments: Attachment[]) => void;\r\n  disabled?: boolean;\r\n}\r\n\r\ntype DropZoneState = 'idle' | 'drag' | 'loading' | 'success' | 'error';\r\n\r\n/**\r\n * AttachmentDropZone - Drag & drop zone for file attachment\r\n * Extracts file content and detects language on drop\r\n */\r\nexport const AttachmentDropZone: React.FC<AttachmentDropZoneProps> = ({\r\n  onFilesAdded,\r\n  disabled = false,\r\n}) => {\r\n  const [state, setState] = useState<DropZoneState>('idle');\r\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent<HTMLDivElement>) => {\r\n    if (disabled) return;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setState('drag');\r\n  }, [disabled]);\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent<HTMLDivElement>) => {\r\n    if (disabled) return;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setState('idle');\r\n  }, [disabled]);\r\n\r\n  const handleDrop = useCallback(\r\n    async (e: React.DragEvent<HTMLDivElement>) => {\r\n      if (disabled) return;\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      const files = Array.from(e.dataTransfer.files);\r\n      if (files.length === 0) {\r\n        setState('idle');\r\n        return;\r\n      }\r\n\r\n      setState('loading');\r\n      setErrorMessage(null);\r\n\r\n      try {\r\n        const attachments = await Promise.all(files.map((file) => readFileContent(file)));\r\n        onFilesAdded(attachments);\r\n        setState('success');\r\n        setTimeout(() => setState('idle'), 2000);\r\n      } catch (error) {\r\n        const message = error instanceof Error ? error.message : 'Failed to process files';\r\n        setErrorMessage(message);\r\n        setState('error');\r\n        setTimeout(() => setState('idle'), 3000);\r\n      }\r\n    },\r\n    [disabled, onFilesAdded]\r\n  );\r\n\r\n  const handleFileInput = useCallback(\r\n    async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const files = Array.from(e.target.files || []);\r\n      if (files.length === 0) return;\r\n\r\n      setState('loading');\r\n      setErrorMessage(null);\r\n\r\n      try {\r\n        const attachments = await Promise.all(files.map((file) => readFileContent(file)));\r\n        onFilesAdded(attachments);\r\n        setState('success');\r\n        setTimeout(() => setState('idle'), 2000);\r\n      } catch (error) {\r\n        const message = error instanceof Error ? error.message : 'Failed to process files';\r\n        setErrorMessage(message);\r\n        setState('error');\r\n        setTimeout(() => setState('idle'), 3000);\r\n      }\r\n    },\r\n    [onFilesAdded]\r\n  );\r\n\r\n  const stateMessage: Record<DropZoneState, string> = {\r\n    idle: 'Drag files here or click to browse',\r\n    drag: 'Drop files to attach',\r\n    loading: 'Processing files...',\r\n    success: '\u2713 Files added successfully',\r\n    error: '\u2717 Error processing files',\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`${styles.dropZone} ${styles[state]} ${disabled ? styles.disabled : ''}`}\r\n      onDragOver={handleDragOver}\r\n      onDragLeave={handleDragLeave}\r\n      onDrop={handleDrop}\r\n    >\r\n      <input\r\n        type=\"file\"\r\n        multiple\r\n        onChange={handleFileInput}\r\n        disabled={disabled || state === 'loading'}\r\n        style={{ display: 'none' }}\r\n        id=\"file-input\"\r\n      />\r\n\r\n      <label htmlFor=\"file-input\" className={styles.content}>\r\n        <div className={styles.icon}>\r\n          {state === 'loading' && <span className={styles.spinner}>\u27F3</span>}\r\n          {state === 'success' && <span>\u2713</span>}\r\n          {state === 'error' && <span>\u26A0</span>}\r\n          {['idle', 'drag'].includes(state) && <span>\uD83D\uDCCE</span>}\r\n        </div>\r\n        <p className={styles.message}>{stateMessage[state]}</p>\r\n        {errorMessage && <p className={styles.error}>{errorMessage}</p>}\r\n        <p className={styles.hint}>\r\n          Supports code, text, markdown, JSON, and other text files\r\n        </p>\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\n", "/**\r\n * Map file extensions to programming language names for markdown code blocks\r\n * Supports 15+ file types commonly used in code analysis workflows\r\n */\r\nexport const languageMap: Record<string, string> = {\r\n  // Web & TypeScript\r\n  '.ts': 'typescript',\r\n  '.tsx': 'typescript',\r\n  '.js': 'javascript',\r\n  '.jsx': 'javascript',\r\n  '.html': 'html',\r\n  '.css': 'css',\r\n  '.scss': 'scss',\r\n  '.less': 'less',\r\n\r\n  // Python\r\n  '.py': 'python',\r\n\r\n  // Go\r\n  '.go': 'go',\r\n\r\n  // Java & JVM\r\n  '.java': 'java',\r\n  '.kotlin': 'kotlin',\r\n  '.scala': 'scala',\r\n\r\n  // C/C++/Rust\r\n  '.cpp': 'cpp',\r\n  '.cc': 'cpp',\r\n  '.cxx': 'cpp',\r\n  '.c': 'c',\r\n  '.h': 'c',\r\n  '.hpp': 'cpp',\r\n  '.rs': 'rust',\r\n\r\n  // Ruby & PHP\r\n  '.rb': 'ruby',\r\n  '.php': 'php',\r\n\r\n  // Data & Config\r\n  '.json': 'json',\r\n  '.yaml': 'yaml',\r\n  '.yml': 'yaml',\r\n  '.xml': 'xml',\r\n  '.csv': 'csv',\r\n  '.toml': 'toml',\r\n\r\n  // Database\r\n  '.sql': 'sql',\r\n\r\n  // Markdown & Text\r\n  '.md': 'markdown',\r\n  '.txt': 'text',\r\n\r\n  // Shell & Scripts\r\n  '.sh': 'bash',\r\n  '.bash': 'bash',\r\n  '.zsh': 'bash',\r\n\r\n  // Build & Config\r\n  '.gradle': 'gradle',\r\n  '.maven': 'maven',\r\n  '.docker': 'dockerfile',\r\n\r\n  // Default fallback\r\n  'default': 'plaintext',\r\n};\r\n\r\n/**\r\n * Get language from file extension with fallback\r\n */\r\nexport function getLanguage(extension: string): string {\r\n  return languageMap[extension] || languageMap['default'];\r\n}\r\n", "import { Attachment } from '../types';\r\nimport { languageMap } from './languageMap';\r\n\r\n/**\r\n * Extract content from a file and detect its language\r\n */\r\nexport async function readFileContent(file: File): Promise<Attachment> {\r\n  const id = Math.random().toString(36).substring(2, 11);\r\n  const filename = file.name;\r\n  const extension = getFileExtension(filename);\r\n  const language = languageMap[extension] || 'plaintext';\r\n  const isText = isTextFile(extension);\r\n  const isBinary = !isText;\r\n\r\n  let content: string | undefined;\r\n  let preview: string | undefined;\r\n\r\n  if (isText) {\r\n    try {\r\n      content = await file.text();\r\n      preview = content.substring(0, 200);\r\n    } catch (error) {\r\n      console.error(`Failed to read text from file: ${filename}`, error);\r\n      // Leave content undefined for binary files\r\n    }\r\n  }\r\n\r\n  return {\r\n    id,\r\n    filename,\r\n    type: isImage(extension) ? 'IMAGE' : 'FILE',\r\n    extension,\r\n    mimeType: file.type || getMimeType(extension),\r\n    size: file.size,\r\n    content,\r\n    preview,\r\n    language,\r\n    isText,\r\n    isBinary,\r\n    createdAt: new Date(),\r\n  };\r\n}\r\n\r\n/**\r\n * Extract file extension from filename\r\n */\r\nfunction getFileExtension(filename: string): string {\r\n  const parts = filename.split('.');\r\n  if (parts.length > 1) {\r\n    return '.' + parts[parts.length - 1].toLowerCase();\r\n  }\r\n  return '';\r\n}\r\n\r\n/**\r\n * Determine if file is text-based (can extract content)\r\n */\r\nfunction isTextFile(extension: string): boolean {\r\n  const textExtensions = [\r\n    '.txt', '.md', '.json', '.js', '.ts', '.tsx', '.jsx',\r\n    '.py', '.go', '.java', '.cpp', '.c', '.h', '.rs', '.rb',\r\n    '.php', '.html', '.css', '.scss', '.yaml', '.yml', '.xml',\r\n    '.csv', '.sql', '.sh', '.bash', '.gradle', '.maven',\r\n  ];\r\n  return textExtensions.includes(extension);\r\n}\r\n\r\n/**\r\n * Determine if file is an image\r\n */\r\nfunction isImage(extension: string): boolean {\r\n  const imageExtensions = ['.png', '.jpg', '.jpeg', '.gif', '.bmp', '.svg', '.webp'];\r\n  return imageExtensions.includes(extension);\r\n}\r\n\r\n/**\r\n * Get MIME type from file extension\r\n */\r\nfunction getMimeType(extension: string): string {\r\n  const mimeTypes: Record<string, string> = {\r\n    '.txt': 'text/plain',\r\n    '.md': 'text/markdown',\r\n    '.json': 'application/json',\r\n    '.js': 'text/javascript',\r\n    '.ts': 'text/typescript',\r\n    '.tsx': 'text/typescript',\r\n    '.jsx': 'text/javascript',\r\n    '.py': 'text/x-python',\r\n    '.go': 'text/x-go',\r\n    '.java': 'text/x-java',\r\n    '.cpp': 'text/x-cpp',\r\n    '.c': 'text/x-c',\r\n    '.rs': 'text/x-rust',\r\n    '.rb': 'text/x-ruby',\r\n    '.html': 'text/html',\r\n    '.css': 'text/css',\r\n    '.xml': 'application/xml',\r\n    '.csv': 'text/csv',\r\n    '.pdf': 'application/pdf',\r\n    '.png': 'image/png',\r\n    '.jpg': 'image/jpeg',\r\n    '.jpeg': 'image/jpeg',\r\n    '.gif': 'image/gif',\r\n    '.svg': 'image/svg+xml',\r\n    '.webp': 'image/webp',\r\n  };\r\n  return mimeTypes[extension] || 'application/octet-stream';\r\n}\r\n", ".dropZone {\r\n  border: 2px dashed #333333;\r\n  border-radius: 8px;\r\n  padding: 48px 24px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  background: #1a1a1a;\r\n}\r\n\r\n.dropZone:hover {\r\n  border-color: #FF6B00;\r\n  background: #242424;\r\n}\r\n\r\n.dropZone.drag {\r\n  border-color: #FF6B00;\r\n  background: rgba(255, 107, 0, 0.1);\r\n  box-shadow: inset 0 0 12px rgba(255, 107, 0, 0.2);\r\n}\r\n\r\n.dropZone.loading {\r\n  border-color: #4a9eff;\r\n  background: rgba(74, 158, 255, 0.05);\r\n  pointer-events: none;\r\n}\r\n\r\n.dropZone.success {\r\n  border-color: #4caf50;\r\n  background: rgba(76, 175, 80, 0.05);\r\n}\r\n\r\n.dropZone.error {\r\n  border-color: #ff6b6b;\r\n  background: rgba(255, 107, 107, 0.05);\r\n}\r\n\r\n.dropZone.disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n  pointer-events: none;\r\n}\r\n\r\n.content {\r\n  display: block;\r\n  cursor: pointer;\r\n}\r\n\r\n.icon {\r\n  font-size: 48px;\r\n  margin-bottom: 16px;\r\n  display: inline-block;\r\n}\r\n\r\n.spinner {\r\n  display: inline-block;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.message {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0 0 8px 0;\r\n}\r\n\r\n.hint {\r\n  font-size: 13px;\r\n  color: #888888;\r\n  margin: 0;\r\n}\r\n\r\n.error {\r\n  font-size: 13px;\r\n  color: #ff6b6b;\r\n  margin: 8px 0 0 0;\r\n}\r\n", "import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Attachment } from '../types';\r\nimport { generateClipboardFilename } from '../utils/filenameGenerator';\r\nimport { useClipboard } from '../hooks/useClipboard';\r\nimport styles from './PasteTextModal.module.css';\r\n\r\ninterface PasteTextModalProps {\r\n  isOpen: boolean;\r\n  existingFilenames: string[];\r\n  onTextAdded: (attachment: Attachment) => void;\r\n  onClose: () => void;\r\n}\r\n\r\n/**\r\n * PasteTextModal - Modal for pasting raw text as attachment\r\n * Auto-detects clipboard content and auto-generates filename\r\n */\r\nexport const PasteTextModal: React.FC<PasteTextModalProps> = ({\r\n  isOpen,\r\n  existingFilenames,\r\n  onTextAdded,\r\n  onClose,\r\n}) => {\r\n  const [text, setText] = useState('');\r\n  const [filename, setFilename] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { read: readClipboard } = useClipboard();\r\n\r\n  // Auto-detect clipboard on modal open\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setIsLoading(true);\r\n      readClipboard().then((clipboardText) => {\r\n        if (clipboardText) {\r\n          setText(clipboardText);\r\n          const generatedFilename = generateClipboardFilename(existingFilenames);\r\n          setFilename(generatedFilename);\r\n        }\r\n        setIsLoading(false);\r\n      });\r\n    }\r\n  }, [isOpen, readClipboard, existingFilenames]);\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    if (!text.trim()) {\r\n      alert('Please enter text to paste');\r\n      return;\r\n    }\r\n\r\n    if (!filename.trim()) {\r\n      alert('Please enter a filename');\r\n      return;\r\n    }\r\n\r\n    const attachment: Attachment = {\r\n      id: Math.random().toString(36).substring(2, 11),\r\n      filename: filename.trim(),\r\n      type: 'PASTED_TEXT',\r\n      extension: '.txt',\r\n      mimeType: 'text/plain',\r\n      size: text.length,\r\n      content: text,\r\n      preview: text.substring(0, 200),\r\n      language: 'text',\r\n      isText: true,\r\n      isBinary: false,\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    onTextAdded(attachment);\r\n    setText('');\r\n    setFilename('');\r\n    onClose();\r\n  }, [text, filename, onTextAdded, onClose]);\r\n\r\n  const handleClose = useCallback(() => {\r\n    setText('');\r\n    setFilename('');\r\n    onClose();\r\n  }, [onClose]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className={styles.overlay} onClick={handleClose}>\r\n      <div className={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n        <div className={styles.header}>\r\n          <h2 className={styles.title}>Paste Text as Attachment</h2>\r\n          <button className={styles.closeButton} onClick={handleClose}>\r\n            \u2715\r\n          </button>\r\n        </div>\r\n\r\n        <div className={styles.body}>\r\n          <div className={styles.formGroup}>\r\n            <label className={styles.label}>Filename</label>\r\n            <input\r\n              type=\"text\"\r\n              className={styles.input}\r\n              value={filename}\r\n              onChange={(e) => setFilename(e.target.value)}\r\n              placeholder=\"clipboard_001.txt\"\r\n            />\r\n            <p className={styles.hint}>\r\n              Auto-generated: {generateClipboardFilename(existingFilenames)}\r\n            </p>\r\n          </div>\r\n\r\n          <div className={styles.formGroup}>\r\n            <label className={styles.label}>Text Content</label>\r\n            <textarea\r\n              className={styles.textarea}\r\n              value={text}\r\n              onChange={(e) => setText(e.target.value)}\r\n              placeholder=\"Paste text here...\"\r\n              disabled={isLoading}\r\n            />\r\n            <p className={styles.hint}>\r\n              {text.length > 0\r\n                ? `${text.length} characters (~${Math.ceil(text.length / 4)} tokens)`\r\n                : 'Paste or type text here'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={styles.footer}>\r\n          <button className={styles.cancelButton} onClick={handleClose}>\r\n            Cancel\r\n          </button>\r\n          <button\r\n            className={styles.submitButton}\r\n            onClick={handleSubmit}\r\n            disabled={isLoading || !text.trim()}\r\n          >\r\n            {isLoading ? 'Loading...' : 'Add Text as Attachment'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n", "/**\r\n * Generate unique clipboard filenames with auto-increment\r\n * Supports multiple pastes without conflicts:\r\n * clipboard_001.txt, clipboard_002.txt, clipboard_003.txt, etc\r\n */\r\nexport function generateClipboardFilename(existingFiles: string[]): string {\r\n  const clipboardPattern = /^clipboard_(\\d+)\\.txt$/;\r\n  const usedNumbers = new Set<number>();\r\n\r\n  // Extract all used numbers from existing clipboard files\r\n  for (const file of existingFiles) {\r\n    const match = file.match(clipboardPattern);\r\n    if (match) {\r\n      usedNumbers.add(parseInt(match[1], 10));\r\n    }\r\n  }\r\n\r\n  // Find the next available number (fills gaps)\r\n  let nextNumber = 1;\r\n  while (usedNumbers.has(nextNumber)) {\r\n    nextNumber++;\r\n  }\r\n\r\n  return `clipboard_${String(nextNumber).padStart(3, '0')}.txt`;\r\n}\r\n\r\n/**\r\n * Generate unique filename by appending number if conflict exists\r\n */\r\nexport function generateUniqueFilename(originalName: string, existingFiles: string[]): string {\r\n  // If no conflict, use original name\r\n  if (!existingFiles.includes(originalName)) {\r\n    return originalName;\r\n  }\r\n\r\n  // Extract base name and extension\r\n  const lastDot = originalName.lastIndexOf('.');\r\n  const baseName = lastDot > 0 ? originalName.substring(0, lastDot) : originalName;\r\n  const extension = lastDot > 0 ? originalName.substring(lastDot) : '';\r\n\r\n  // Try appending numbers until we find an available name\r\n  for (let i = 1; i <= 1000; i++) {\r\n    const newName = `${baseName}_${i}${extension}`;\r\n    if (!existingFiles.includes(newName)) {\r\n      return newName;\r\n    }\r\n  }\r\n\r\n  // Fallback: append timestamp\r\n  const timestamp = Date.now();\r\n  return `${baseName}_${timestamp}${extension}`;\r\n}\r\n\r\n/**\r\n * Get next clipboard file number\r\n */\r\nexport function getNextClipboardNumber(existingFiles: string[]): number {\r\n  const clipboardPattern = /^clipboard_(\\d+)\\.txt$/;\r\n  let maxNumber = 0;\r\n\r\n  for (const file of existingFiles) {\r\n    const match = file.match(clipboardPattern);\r\n    if (match) {\r\n      const num = parseInt(match[1], 10);\r\n      if (num > maxNumber) {\r\n        maxNumber = num;\r\n      }\r\n    }\r\n  }\r\n\r\n  return maxNumber + 1;\r\n}\r\n", "import { useState, useCallback } from 'react';\r\n\r\ninterface ClipboardStatus {\r\n  loading: boolean;\r\n  error: string | null;\r\n  success: boolean;\r\n}\r\n\r\n/**\r\n * Custom hook for clipboard operations with error handling\r\n * Uses window.CodeRefCore.utils.clipboard when available\r\n * Falls back to navigator.clipboard in browser environments\r\n */\r\nexport function useClipboard() {\r\n  const [status, setStatus] = useState<ClipboardStatus>({\r\n    loading: false,\r\n    error: null,\r\n    success: false,\r\n  });\r\n\r\n  /**\r\n   * Write text to clipboard\r\n   */\r\n  const write = useCallback(async (text: string): Promise<boolean> => {\r\n    setStatus({ loading: true, error: null, success: false });\r\n\r\n    try {\r\n      // Try CodeRefCore clipboard first (Electron support)\r\n      if (window.CodeRefCore?.utils?.clipboard?.write) {\r\n        await window.CodeRefCore.utils.clipboard.write(text);\r\n        setStatus({ loading: false, error: null, success: true });\r\n        return true;\r\n      }\r\n\r\n      // Fallback to navigator.clipboard\r\n      if (navigator.clipboard?.writeText) {\r\n        await navigator.clipboard.writeText(text);\r\n        setStatus({ loading: false, error: null, success: true });\r\n        return true;\r\n      }\r\n\r\n      // Last resort: copy to textarea (for restricted environments)\r\n      const textarea = document.createElement('textarea');\r\n      textarea.value = text;\r\n      document.body.appendChild(textarea);\r\n      textarea.select();\r\n      const success = document.execCommand('copy');\r\n      document.body.removeChild(textarea);\r\n\r\n      if (success) {\r\n        setStatus({ loading: false, error: null, success: true });\r\n        return true;\r\n      }\r\n\r\n      throw new Error('Clipboard write failed - all methods exhausted');\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to write to clipboard';\r\n      setStatus({ loading: false, error: errorMessage, success: false });\r\n      return false;\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Read text from clipboard\r\n   */\r\n  const read = useCallback(async (): Promise<string | null> => {\r\n    setStatus({ loading: true, error: null, success: false });\r\n\r\n    try {\r\n      // Try CodeRefCore clipboard first (Electron support)\r\n      if (window.CodeRefCore?.utils?.clipboard?.read) {\r\n        const text = await window.CodeRefCore.utils.clipboard.read();\r\n        setStatus({ loading: false, error: null, success: true });\r\n        return text;\r\n      }\r\n\r\n      // Fallback to navigator.clipboard\r\n      if (navigator.clipboard?.readText) {\r\n        const text = await navigator.clipboard.readText();\r\n        setStatus({ loading: false, error: null, success: true });\r\n        return text;\r\n      }\r\n\r\n      throw new Error('Clipboard read failed - method not available');\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to read from clipboard';\r\n      setStatus({ loading: false, error: errorMessage, success: false });\r\n      return null;\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Clear status\r\n   */\r\n  const clearStatus = useCallback(() => {\r\n    setStatus({ loading: false, error: null, success: false });\r\n  }, []);\r\n\r\n  return {\r\n    write,\r\n    read,\r\n    status,\r\n    clearStatus,\r\n  };\r\n}\r\n\r\n/**\r\n * Declare CodeRefCore global for TypeScript\r\n */\r\ndeclare global {\r\n  interface Window {\r\n    CodeRefCore?: {\r\n      utils?: {\r\n        clipboard?: {\r\n          write(text: string): Promise<void>;\r\n          read(): Promise<string>;\r\n        };\r\n      };\r\n    };\r\n  }\r\n}\r\n", ".overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal {\r\n  background: #242424;\r\n  border: 1px solid #333333;\r\n  border-radius: 12px;\r\n  width: 90%;\r\n  max-width: 600px;\r\n  max-height: 90vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 24px;\r\n  border-bottom: 1px solid #333333;\r\n}\r\n\r\n.title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0;\r\n}\r\n\r\n.closeButton {\r\n  background: none;\r\n  border: none;\r\n  color: #888888;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.closeButton:hover {\r\n  color: #ffffff;\r\n}\r\n\r\n.body {\r\n  padding: 24px;\r\n  overflow-y: auto;\r\n  flex: 1;\r\n}\r\n\r\n.formGroup {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.label {\r\n  display: block;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.input {\r\n  width: 100%;\r\n  padding: 10px 12px;\r\n  background: #1a1a1a;\r\n  border: 1px solid #333333;\r\n  border-radius: 6px;\r\n  color: #ffffff;\r\n  font-size: 14px;\r\n  font-family: inherit;\r\n  box-sizing: border-box;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.input:focus {\r\n  outline: none;\r\n  border-color: #FF6B00;\r\n  box-shadow: 0 0 8px rgba(255, 107, 0, 0.2);\r\n}\r\n\r\n.textarea {\r\n  width: 100%;\r\n  height: 200px;\r\n  padding: 12px;\r\n  background: #1a1a1a;\r\n  border: 1px solid #333333;\r\n  border-radius: 6px;\r\n  color: #ffffff;\r\n  font-size: 14px;\r\n  font-family: monospace;\r\n  resize: vertical;\r\n  box-sizing: border-box;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.textarea:focus {\r\n  outline: none;\r\n  border-color: #FF6B00;\r\n  box-shadow: 0 0 8px rgba(255, 107, 0, 0.2);\r\n}\r\n\r\n.textarea:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.hint {\r\n  font-size: 12px;\r\n  color: #888888;\r\n  margin-top: 6px;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.footer {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: flex-end;\r\n  padding: 16px 24px;\r\n  border-top: 1px solid #333333;\r\n}\r\n\r\n.cancelButton,\r\n.submitButton {\r\n  padding: 10px 20px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  border: none;\r\n  transition: all 0.2s;\r\n  font-family: inherit;\r\n}\r\n\r\n.cancelButton {\r\n  background: #333333;\r\n  color: #ffffff;\r\n}\r\n\r\n.cancelButton:hover {\r\n  background: #444444;\r\n}\r\n\r\n.submitButton {\r\n  background: #FF6B00;\r\n  color: #ffffff;\r\n}\r\n\r\n.submitButton:hover:not(:disabled) {\r\n  background: #ff8a33;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.submitButton:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n", ".container {\r\n  padding: 24px;\r\n  background: #1a1a1a;\r\n  border-radius: 8px;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.title {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0 0 20px 0;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-top: 16px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.pasteButton,\r\n.clearButton {\r\n  padding: 10px 16px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  border: none;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  font-family: inherit;\r\n}\r\n\r\n.pasteButton {\r\n  background: #FF6B00;\r\n  color: #ffffff;\r\n}\r\n\r\n.pasteButton:hover {\r\n  background: #ff8a33;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.clearButton {\r\n  background: #333333;\r\n  color: #ffffff;\r\n}\r\n\r\n.clearButton:hover {\r\n  background: #444444;\r\n}\r\n\r\n.summary {\r\n  display: flex;\r\n  gap: 24px;\r\n  padding: 12px 16px;\r\n  background: #242424;\r\n  border-radius: 6px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.summaryItem {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.summaryLabel {\r\n  font-size: 13px;\r\n  color: #888888;\r\n  font-weight: 500;\r\n}\r\n\r\n.summaryValue {\r\n  font-size: 14px;\r\n  color: #FF6B00;\r\n  font-weight: 600;\r\n}\r\n\r\n.attachmentList {\r\n  margin-top: 20px;\r\n}\r\n\r\n.listTitle {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0 0 12px 0;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.attachmentItem {\r\n  background: #242424;\r\n  border: 1px solid #333333;\r\n  border-radius: 6px;\r\n  margin-bottom: 12px;\r\n  overflow: hidden;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.attachmentItem:hover {\r\n  border-color: #FF6B00;\r\n}\r\n\r\n.attachmentHeader {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12px;\r\n  gap: 12px;\r\n}\r\n\r\n.attachmentIcon {\r\n  font-size: 24px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.attachmentInfo {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.attachmentName {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0 0 4px 0;\r\n  word-break: break-word;\r\n}\r\n\r\n.attachmentMeta {\r\n  font-size: 12px;\r\n  color: #888888;\r\n  margin: 0;\r\n}\r\n\r\n.removeButton {\r\n  background: none;\r\n  border: none;\r\n  color: #888888;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  padding: 4px;\r\n  width: 28px;\r\n  height: 28px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n  transition: all 0.2s;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.removeButton:hover {\r\n  background: #333333;\r\n  color: #ff6b6b;\r\n}\r\n\r\n.attachmentPreview {\r\n  padding: 12px;\r\n  background: #1a1a1a;\r\n  border-top: 1px solid #333333;\r\n  font-size: 12px;\r\n  color: #888888;\r\n  font-family: monospace;\r\n  max-height: 100px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.attachmentPreview p {\r\n  margin: 0;\r\n  white-space: pre-wrap;\r\n  word-break: break-word;\r\n}\r\n", "import React, { useMemo } from 'react';\r\nimport { Attachment, PreloadedPrompt } from '../types';\r\nimport {\r\n  calculateTotalTokens,\r\n  estimatePromptTokens,\r\n  estimateTokens,\r\n  formatTokenCount,\r\n  getTokenWarning,\r\n} from '../utils/tokenEstimator';\r\nimport styles from './WorkflowMeta.module.css';\r\n\r\ninterface WorkflowMetaProps {\r\n  prompt?: PreloadedPrompt;\r\n  attachments: Attachment[];\r\n}\r\n\r\n/**\r\n * WorkflowMeta - Display metadata and statistics about the workflow\r\n * Shows token counts, file sizes, languages, and warnings\r\n */\r\nexport const WorkflowMeta: React.FC<WorkflowMetaProps> = ({ prompt, attachments }) => {\r\n  const metadata = useMemo(() => {\r\n    const promptTokens = prompt ? estimatePromptTokens(prompt.text) : 0;\r\n    const attachmentTokens = attachments.map((a) => estimateTokens(a.content || ''));\r\n    const totalTokens = calculateTotalTokens(promptTokens, attachmentTokens);\r\n\r\n    const languages = new Set<string>();\r\n    attachments.forEach((a) => {\r\n      if (a.language) languages.add(a.language);\r\n    });\r\n\r\n    const totalSize = attachments.reduce((sum, a) => sum + a.size, 0);\r\n    const fileTypes = new Set<string>();\r\n    attachments.forEach((a) => {\r\n      fileTypes.add(a.type);\r\n    });\r\n\r\n    return {\r\n      promptTokens,\r\n      attachmentTokens,\r\n      totalTokens,\r\n      languages: Array.from(languages),\r\n      totalSize,\r\n      fileTypes: Array.from(fileTypes),\r\n      warning: getTokenWarning(totalTokens),\r\n    };\r\n  }, [prompt, attachments]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h2 className={styles.title}>Workflow Summary</h2>\r\n\r\n      <div className={styles.grid}>\r\n        <div className={styles.card}>\r\n          <h3 className={styles.cardTitle}>Prompt</h3>\r\n          {prompt ? (\r\n            <div className={styles.promptInfo}>\r\n              <p className={styles.promptLabel}>{prompt.label}</p>\r\n              <p className={styles.promptTokens}>\r\n                {formatTokenCount(metadata.promptTokens)} tokens\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <p className={styles.empty}>No prompt selected</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className={styles.card}>\r\n          <h3 className={styles.cardTitle}>Attachments</h3>\r\n          <div className={styles.stats}>\r\n            <div className={styles.stat}>\r\n              <span className={styles.statLabel}>Files:</span>\r\n              <span className={styles.statValue}>{attachments.length}</span>\r\n            </div>\r\n            <div className={styles.stat}>\r\n              <span className={styles.statLabel}>Size:</span>\r\n              <span className={styles.statValue}>\r\n                {metadata.totalSize > 0 ? (metadata.totalSize / 1024).toFixed(1) + ' KB' : '0 KB'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={styles.card}>\r\n          <h3 className={styles.cardTitle}>Total Tokens</h3>\r\n          <p className={`${styles.tokenCount} ${metadata.warning ? styles.warning : ''}`}>\r\n            {formatTokenCount(metadata.totalTokens)}\r\n          </p>\r\n          <p className={styles.tokenBreakdown}>\r\n            Prompt: {formatTokenCount(metadata.promptTokens)} + Attachments:{' '}\r\n            {formatTokenCount(\r\n              metadata.attachmentTokens.reduce((sum, t) => sum + t, 0)\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {metadata.languages.length > 0 && (\r\n        <div className={styles.languages}>\r\n          <h3 className={styles.sectionTitle}>Languages Detected</h3>\r\n          <div className={styles.languageBadges}>\r\n            {metadata.languages.map((lang) => (\r\n              <span key={lang} className={styles.languageBadge}>\r\n                {lang}\r\n              </span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {metadata.fileTypes.length > 0 && (\r\n        <div className={styles.fileTypes}>\r\n          <h3 className={styles.sectionTitle}>File Types</h3>\r\n          <div className={styles.fileTypeBadges}>\r\n            {metadata.fileTypes.map((type) => (\r\n              <span key={type} className={styles.fileTypeBadge}>\r\n                {type}\r\n              </span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {metadata.warning && (\r\n        <div className={styles.warningBox}>\r\n          <p className={styles.warningText}>\u26A0\uFE0F {metadata.warning}</p>\r\n          <p className={styles.warningHint}>Consider splitting large files or removing some attachments</p>\r\n        </div>\r\n      )}\r\n\r\n      {attachments.length === 0 && !prompt && (\r\n        <div className={styles.emptyState}>\r\n          <p className={styles.emptyText}>Select a prompt and add attachments to see metadata</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n", ".container {\r\n  padding: 24px;\r\n  background: #1a1a1a;\r\n  border-radius: 8px;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.title {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0 0 20px 0;\r\n}\r\n\r\n.grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 16px;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.card {\r\n  background: #242424;\r\n  border: 1px solid #333333;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n}\r\n\r\n.cardTitle {\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  color: #FF6B00;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n  margin: 0 0 12px 0;\r\n}\r\n\r\n.promptInfo {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.promptLabel {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0;\r\n}\r\n\r\n.promptTokens {\r\n  font-size: 14px;\r\n  color: #FF6B00;\r\n  margin: 0;\r\n}\r\n\r\n.empty {\r\n  font-size: 14px;\r\n  color: #888888;\r\n  margin: 0;\r\n  font-style: italic;\r\n}\r\n\r\n.stats {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.stat {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 14px;\r\n}\r\n\r\n.statLabel {\r\n  color: #888888;\r\n}\r\n\r\n.statValue {\r\n  color: #ffffff;\r\n  font-weight: 600;\r\n}\r\n\r\n.tokenCount {\r\n  font-size: 32px;\r\n  font-weight: 700;\r\n  color: #FF6B00;\r\n  margin: 0;\r\n  word-break: break-word;\r\n}\r\n\r\n.tokenCount.warning {\r\n  color: #ff9d33;\r\n}\r\n\r\n.tokenBreakdown {\r\n  font-size: 12px;\r\n  color: #888888;\r\n  margin: 8px 0 0 0;\r\n}\r\n\r\n.sectionTitle {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0 0 12px 0;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.languages,\r\n.fileTypes {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.languageBadges,\r\n.fileTypeBadges {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.languageBadge,\r\n.fileTypeBadge {\r\n  display: inline-block;\r\n  padding: 6px 12px;\r\n  background: #333333;\r\n  color: #ffffff;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n}\r\n\r\n.languageBadge {\r\n  background: rgba(255, 107, 0, 0.15);\r\n  color: #FF6B00;\r\n  border: 1px solid rgba(255, 107, 0, 0.3);\r\n}\r\n\r\n.fileTypeBadge {\r\n  background: rgba(100, 200, 255, 0.15);\r\n  color: #64c8ff;\r\n  border: 1px solid rgba(100, 200, 255, 0.3);\r\n}\r\n\r\n.warningBox {\r\n  padding: 16px;\r\n  background: rgba(255, 153, 51, 0.1);\r\n  border-left: 4px solid #FF9933;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.warningText {\r\n  font-size: 14px;\r\n  color: #FF9933;\r\n  margin: 0 0 8px 0;\r\n  font-weight: 600;\r\n}\r\n\r\n.warningHint {\r\n  font-size: 12px;\r\n  color: #FF9933;\r\n  margin: 0;\r\n  opacity: 0.8;\r\n}\r\n\r\n.emptyState {\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n}\r\n\r\n.emptyText {\r\n  font-size: 14px;\r\n  color: #888888;\r\n  margin: 0;\r\n  font-style: italic;\r\n}\r\n", "import React, { useState, useRef, useEffect } from 'react';\r\nimport styles from './ExportMenu.module.css';\r\n\r\ninterface ExportMenuProps {\r\n  onCopyJSON: () => Promise<void>;\r\n  onExportJSON: () => Promise<void>;\r\n  onExportMarkdown: () => Promise<void>;\r\n  disabled?: boolean;\r\n}\r\n\r\n/**\r\n * ExportMenu - Dropdown menu for export actions\r\n * Options: Copy to Clipboard (JSON), Export .json, Export .md\r\n */\r\nexport const ExportMenu: React.FC<ExportMenuProps> = ({\r\n  onCopyJSON,\r\n  onExportJSON,\r\n  onExportMarkdown,\r\n  disabled = false,\r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [message, setMessage] = useState<string | null>(null);\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Close menu when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    }\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  const handleCopyJSON = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      await onCopyJSON();\r\n      setMessage('\u2713 Copied to clipboard');\r\n      setTimeout(() => setMessage(null), 2000);\r\n      setIsOpen(false);\r\n    } catch (error) {\r\n      const msg = error instanceof Error ? error.message : 'Failed to copy';\r\n      setMessage(`\u2717 ${msg}`);\r\n      setTimeout(() => setMessage(null), 3000);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleExportJSON = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      await onExportJSON();\r\n      setMessage('\u2713 Exported as JSON');\r\n      setTimeout(() => setMessage(null), 2000);\r\n      setIsOpen(false);\r\n    } catch (error) {\r\n      const msg = error instanceof Error ? error.message : 'Failed to export';\r\n      setMessage(`\u2717 ${msg}`);\r\n      setTimeout(() => setMessage(null), 3000);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleExportMarkdown = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      await onExportMarkdown();\r\n      setMessage('\u2713 Exported as Markdown');\r\n      setTimeout(() => setMessage(null), 2000);\r\n      setIsOpen(false);\r\n    } catch (error) {\r\n      const msg = error instanceof Error ? error.message : 'Failed to export';\r\n      setMessage(`\u2717 ${msg}`);\r\n      setTimeout(() => setMessage(null), 3000);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={menuRef} className={styles.container}>\r\n      <button\r\n        className={`${styles.button} ${styles.primary}`}\r\n        onClick={handleCopyJSON}\r\n        disabled={disabled || isLoading}\r\n        type=\"button\"\r\n        title=\"Copy workflow as JSON to clipboard\"\r\n      >\r\n        {isLoading ? '\u27F3 Exporting...' : '\uD83D\uDCCB COPY ALL TO CLIPBOARD'}\r\n      </button>\r\n\r\n      <div className={styles.menuWrapper}>\r\n        <button\r\n          className={`${styles.button} ${styles.secondary}`}\r\n          onClick={() => setIsOpen(!isOpen)}\r\n          disabled={disabled}\r\n          type=\"button\"\r\n          title=\"Export workflow to file\"\r\n        >\r\n          \u2193 EXPORT {isOpen ? '\u25B2' : '\u25BC'}\r\n        </button>\r\n\r\n        {isOpen && (\r\n          <div className={styles.menu}>\r\n            <button\r\n              className={styles.menuItem}\r\n              onClick={handleExportJSON}\r\n              disabled={isLoading}\r\n              type=\"button\"\r\n            >\r\n              <span className={styles.icon}>\uD83D\uDCC4</span>\r\n              <span>Export as .json</span>\r\n            </button>\r\n            <button\r\n              className={styles.menuItem}\r\n              onClick={handleExportMarkdown}\r\n              disabled={isLoading}\r\n              type=\"button\"\r\n            >\r\n              <span className={styles.icon}>\uD83D\uDCDD</span>\r\n              <span>Export as .md</span>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {message && <p className={styles.message}>{message}</p>}\r\n    </div>\r\n  );\r\n};\r\n", ".container {\r\n  display: flex;\r\n  gap: 12px;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.button {\r\n  padding: 12px 20px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  font-family: inherit;\r\n  white-space: nowrap;\r\n}\r\n\r\n.primary {\r\n  background: #FF6B00;\r\n  color: #ffffff;\r\n}\r\n\r\n.primary:hover:not(:disabled) {\r\n  background: #ff8a33;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(255, 107, 0, 0.3);\r\n}\r\n\r\n.primary:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.secondary {\r\n  background: #333333;\r\n  color: #ffffff;\r\n  position: relative;\r\n}\r\n\r\n.secondary:hover:not(:disabled) {\r\n  background: #444444;\r\n}\r\n\r\n.secondary:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.menuWrapper {\r\n  position: relative;\r\n}\r\n\r\n.menu {\r\n  position: absolute;\r\n  top: 100%;\r\n  right: 0;\r\n  background: #242424;\r\n  border: 1px solid #333333;\r\n  border-radius: 6px;\r\n  margin-top: 4px;\r\n  min-width: 180px;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\r\n  z-index: 100;\r\n}\r\n\r\n.menuItem {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  width: 100%;\r\n  padding: 12px 16px;\r\n  background: none;\r\n  border: none;\r\n  color: #ffffff;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  font-family: inherit;\r\n  text-align: left;\r\n}\r\n\r\n.menuItem:first-child {\r\n  border-radius: 5px 5px 0 0;\r\n}\r\n\r\n.menuItem:last-child {\r\n  border-radius: 0 0 5px 5px;\r\n}\r\n\r\n.menuItem:hover:not(:disabled) {\r\n  background: #333333;\r\n  padding-left: 20px;\r\n}\r\n\r\n.menuItem:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.icon {\r\n  font-size: 16px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.message {\r\n  font-size: 13px;\r\n  margin: 0;\r\n  padding: 8px 12px;\r\n  background: rgba(76, 175, 80, 0.1);\r\n  color: #4caf50;\r\n  border-radius: 4px;\r\n  white-space: nowrap;\r\n}\r\n", "import React, { useState, useEffect, useCallback } from 'react';\r\nimport { estimateTokens, formatTokenCount } from '../utils/tokenEstimator';\r\nimport { useClipboard } from '../hooks/useClipboard';\r\nimport styles from './PasteFinalResultModal.module.css';\r\n\r\ninterface PasteFinalResultModalProps {\r\n  isOpen: boolean;\r\n  onResultSaved: (result: string) => void;\r\n  onClose: () => void;\r\n}\r\n\r\n/**\r\n * PasteFinalResultModal - Modal for pasting LLM final result and saving workflow\r\n * Auto-detects clipboard content\r\n */\r\nexport const PasteFinalResultModal: React.FC<PasteFinalResultModalProps> = ({\r\n  isOpen,\r\n  onResultSaved,\r\n  onClose,\r\n}) => {\r\n  const [result, setResult] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { read: readClipboard } = useClipboard();\r\n\r\n  // Auto-detect clipboard on modal open\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setIsLoading(true);\r\n      readClipboard().then((clipboardText) => {\r\n        if (clipboardText) {\r\n          setResult(clipboardText);\r\n        }\r\n        setIsLoading(false);\r\n      });\r\n    }\r\n  }, [isOpen, readClipboard]);\r\n\r\n  const handleSave = useCallback(() => {\r\n    if (!result.trim()) {\r\n      alert('Please paste or enter the LLM result');\r\n      return;\r\n    }\r\n\r\n    onResultSaved(result);\r\n    setResult('');\r\n    onClose();\r\n  }, [result, onResultSaved, onClose]);\r\n\r\n  const handleClose = useCallback(() => {\r\n    setResult('');\r\n    onClose();\r\n  }, [onClose]);\r\n\r\n  const tokenCount = estimateTokens(result);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className={styles.overlay} onClick={handleClose}>\r\n      <div className={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n        <div className={styles.header}>\r\n          <h2 className={styles.title}>Paste Final LLM Result</h2>\r\n          <button className={styles.closeButton} onClick={handleClose}>\r\n            \u2715\r\n          </button>\r\n        </div>\r\n\r\n        <div className={styles.body}>\r\n          <p className={styles.description}>\r\n            Paste the LLM response below to complete your workflow. This will be saved with all\r\n            attachments and prompts.\r\n          </p>\r\n\r\n          <div className={styles.formGroup}>\r\n            <label className={styles.label}>LLM Response</label>\r\n            <textarea\r\n              className={styles.textarea}\r\n              value={result}\r\n              onChange={(e) => setResult(e.target.value)}\r\n              placeholder=\"Paste the LLM response here...\"\r\n              disabled={isLoading}\r\n            />\r\n            <p className={styles.hint}>\r\n              {result.length > 0\r\n                ? `${result.length} characters (~${formatTokenCount(tokenCount)} tokens)`\r\n                : 'Paste the LLM response here'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={styles.footer}>\r\n          <button className={styles.cancelButton} onClick={handleClose}>\r\n            Cancel\r\n          </button>\r\n          <button\r\n            className={styles.saveButton}\r\n            onClick={handleSave}\r\n            disabled={isLoading || !result.trim()}\r\n          >\r\n            {isLoading ? 'Loading...' : 'Save Workflow'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n", ".overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal {\r\n  background: #242424;\r\n  border: 1px solid #333333;\r\n  border-radius: 12px;\r\n  width: 90%;\r\n  max-width: 700px;\r\n  max-height: 90vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 24px;\r\n  border-bottom: 1px solid #333333;\r\n}\r\n\r\n.title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0;\r\n}\r\n\r\n.closeButton {\r\n  background: none;\r\n  border: none;\r\n  color: #888888;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.closeButton:hover {\r\n  color: #ffffff;\r\n}\r\n\r\n.body {\r\n  padding: 24px;\r\n  overflow-y: auto;\r\n  flex: 1;\r\n}\r\n\r\n.description {\r\n  font-size: 14px;\r\n  color: #aaaaaa;\r\n  margin: 0 0 20px 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.formGroup {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.label {\r\n  display: block;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.textarea {\r\n  width: 100%;\r\n  height: 300px;\r\n  padding: 12px;\r\n  background: #1a1a1a;\r\n  border: 1px solid #333333;\r\n  border-radius: 6px;\r\n  color: #ffffff;\r\n  font-size: 14px;\r\n  font-family: monospace;\r\n  resize: vertical;\r\n  box-sizing: border-box;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.textarea:focus {\r\n  outline: none;\r\n  border-color: #FF6B00;\r\n  box-shadow: 0 0 8px rgba(255, 107, 0, 0.2);\r\n}\r\n\r\n.textarea:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.hint {\r\n  font-size: 12px;\r\n  color: #888888;\r\n  margin-top: 6px;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.footer {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: flex-end;\r\n  padding: 16px 24px;\r\n  border-top: 1px solid #333333;\r\n}\r\n\r\n.cancelButton,\r\n.saveButton {\r\n  padding: 10px 20px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  border: none;\r\n  transition: all 0.2s;\r\n  font-family: inherit;\r\n}\r\n\r\n.cancelButton {\r\n  background: #333333;\r\n  color: #ffffff;\r\n}\r\n\r\n.cancelButton:hover {\r\n  background: #444444;\r\n}\r\n\r\n.saveButton {\r\n  background: #FF6B00;\r\n  color: #ffffff;\r\n}\r\n\r\n.saveButton:hover:not(:disabled) {\r\n  background: #ff8a33;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.saveButton:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n", "import { useState, useCallback } from 'react';\r\nimport { Attachment, PreloadedPrompt, Workflow } from '../types';\r\n\r\n/**\r\n * Custom hook for managing workflow state\r\n * Handles prompt selection, attachments, and final result\r\n */\r\nexport function useWorkflow(initialPrompt?: PreloadedPrompt) {\r\n  const [workflow, setWorkflow] = useState<Workflow>({\r\n    id: Math.random().toString(36).substring(2, 11),\r\n    selectedPrompt: initialPrompt,\r\n    attachments: [],\r\n    createdAt: new Date(),\r\n    updatedAt: new Date(),\r\n  });\r\n\r\n  /**\r\n   * Set the selected prompt\r\n   */\r\n  const setSelectedPrompt = useCallback((prompt: PreloadedPrompt) => {\r\n    setWorkflow((prev) => ({\r\n      ...prev,\r\n      selectedPrompt: prompt,\r\n      updatedAt: new Date(),\r\n    }));\r\n  }, []);\r\n\r\n  /**\r\n   * Add attachment(s) to workflow\r\n   */\r\n  const addAttachments = useCallback((attachments: Attachment[]) => {\r\n    setWorkflow((prev) => ({\r\n      ...prev,\r\n      attachments: [...prev.attachments, ...attachments],\r\n      updatedAt: new Date(),\r\n    }));\r\n  }, []);\r\n\r\n  /**\r\n   * Remove attachment by ID\r\n   */\r\n  const removeAttachment = useCallback((attachmentId: string) => {\r\n    setWorkflow((prev) => ({\r\n      ...prev,\r\n      attachments: prev.attachments.filter((a) => a.id !== attachmentId),\r\n      updatedAt: new Date(),\r\n    }));\r\n  }, []);\r\n\r\n  /**\r\n   * Clear all attachments\r\n   */\r\n  const clearAttachments = useCallback(() => {\r\n    setWorkflow((prev) => ({\r\n      ...prev,\r\n      attachments: [],\r\n      updatedAt: new Date(),\r\n    }));\r\n  }, []);\r\n\r\n  /**\r\n   * Set final LLM result\r\n   */\r\n  const setFinalResult = useCallback((result: string) => {\r\n    setWorkflow((prev) => ({\r\n      ...prev,\r\n      finalResult: result,\r\n      updatedAt: new Date(),\r\n    }));\r\n  }, []);\r\n\r\n  /**\r\n   * Clear final result\r\n   */\r\n  const clearFinalResult = useCallback(() => {\r\n    setWorkflow((prev) => ({\r\n      ...prev,\r\n      finalResult: undefined,\r\n      updatedAt: new Date(),\r\n    }));\r\n  }, []);\r\n\r\n  /**\r\n   * Reset entire workflow\r\n   */\r\n  const resetWorkflow = useCallback(() => {\r\n    setWorkflow({\r\n      id: Math.random().toString(36).substring(2, 11),\r\n      selectedPrompt: undefined,\r\n      attachments: [],\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    });\r\n  }, []);\r\n\r\n  return {\r\n    workflow,\r\n    setSelectedPrompt,\r\n    addAttachments,\r\n    removeAttachment,\r\n    clearAttachments,\r\n    setFinalResult,\r\n    clearFinalResult,\r\n    resetWorkflow,\r\n  };\r\n}\r\n", "import { useState, useCallback } from 'react';\r\n\r\ninterface FileHandlerStatus {\r\n  loading: boolean;\r\n  error: string | null;\r\n}\r\n\r\n/**\r\n * Custom hook for file operations with error handling\r\n * Uses window.CodeRefCore.utils.fileHandlers when available (Electron)\r\n * Falls back to HTML file input in browser environments\r\n */\r\nexport function useFileHandlers() {\r\n  const [status, setStatus] = useState<FileHandlerStatus>({\r\n    loading: false,\r\n    error: null,\r\n  });\r\n\r\n  /**\r\n   * Open file selection dialog\r\n   * Returns selected files or null if cancelled\r\n   */\r\n  const selectFiles = useCallback(\r\n    async (options?: { multiple?: boolean; accept?: string }): Promise<File[] | null> => {\r\n      setStatus({ loading: true, error: null });\r\n\r\n      try {\r\n        // Try CodeRefCore fileHandlers first (Electron support)\r\n        if (window.CodeRefCore?.utils?.fileHandlers?.selectFiles) {\r\n          const files = await window.CodeRefCore.utils.fileHandlers.selectFiles(options);\r\n          setStatus({ loading: false, error: null });\r\n          return files || null;\r\n        }\r\n\r\n        // Fallback to HTML file input\r\n        return new Promise((resolve) => {\r\n          const input = document.createElement('input');\r\n          input.type = 'file';\r\n          input.multiple = options?.multiple ?? false;\r\n          if (options?.accept) {\r\n            input.accept = options.accept;\r\n          }\r\n\r\n          input.onchange = (e) => {\r\n            const target = e.target as HTMLInputElement;\r\n            const files = target.files ? Array.from(target.files) : null;\r\n            setStatus({ loading: false, error: null });\r\n            resolve(files);\r\n          };\r\n\r\n          input.onclick = () => {\r\n            setStatus({ loading: false, error: null });\r\n          };\r\n\r\n          input.click();\r\n        });\r\n      } catch (error) {\r\n        const errorMessage = error instanceof Error ? error.message : 'Failed to select files';\r\n        setStatus({ loading: false, error: errorMessage });\r\n        return null;\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  /**\r\n   * Open directory selection dialog\r\n   * Returns selected directory path or null if cancelled\r\n   */\r\n  const selectDirectory = useCallback(async (): Promise<string | null> => {\r\n    setStatus({ loading: true, error: null });\r\n\r\n    try {\r\n      // Try CodeRefCore fileHandlers first (Electron support)\r\n      if (window.CodeRefCore?.utils?.fileHandlers?.selectDirectory) {\r\n        const directory = await window.CodeRefCore.utils.fileHandlers.selectDirectory();\r\n        setStatus({ loading: false, error: null });\r\n        return directory || null;\r\n      }\r\n\r\n      // Browser fallback - use showDirectoryPicker if available (Chrome/Edge only)\r\n      if ('showDirectoryPicker' in window) {\r\n        try {\r\n          const dirHandle = await (window as any).showDirectoryPicker();\r\n          setStatus({ loading: false, error: null });\r\n          return dirHandle.name; // Limited info in browser\r\n        } catch (err) {\r\n          throw new Error('Directory selection not supported in this browser');\r\n        }\r\n      }\r\n\r\n      throw new Error('Directory selection not available - use Electron or Chrome/Edge browser');\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to select directory';\r\n      setStatus({ loading: false, error: errorMessage });\r\n      return null;\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Check if running in Electron\r\n   */\r\n  const isElectron = useCallback(() => {\r\n    return window.CodeRefCore?.utils?.fileHandlers?.isElectron?.() ?? false;\r\n  }, []);\r\n\r\n  /**\r\n   * Clear status\r\n   */\r\n  const clearStatus = useCallback(() => {\r\n    setStatus({ loading: false, error: null });\r\n  }, []);\r\n\r\n  return {\r\n    selectFiles,\r\n    selectDirectory,\r\n    isElectron,\r\n    status,\r\n    clearStatus,\r\n  };\r\n}\r\n\r\n/**\r\n * Declare CodeRefCore global for TypeScript\r\n */\r\ndeclare global {\r\n  interface Window {\r\n    CodeRefCore?: {\r\n      utils?: {\r\n        fileHandlers?: {\r\n          selectFiles(options?: { multiple?: boolean; accept?: string }): Promise<File[] | null>;\r\n          selectDirectory(): Promise<string | null>;\r\n          isElectron(): boolean;\r\n        };\r\n      };\r\n    };\r\n  }\r\n}\r\n", "import { PreloadedPrompt } from '../types';\r\n\r\n/**\r\n * 3 Preloaded prompts with agent identification headers\r\n * Each prompt requires agent to identify themselves in metadata header\r\n */\r\n\r\nconst CODE_REVIEW_PROMPT = `CODE REVIEW TASK\r\nReview the attached code and any provided context for a comprehensive feature review.\r\nOutput standard Markdown (.md) inside a SINGLE code block.\r\n\r\n**AGENT IDENTIFICATION REQUIRED**\r\nStart your response with a metadata header identifying yourself:\r\n\r\n---\r\n**Agent:** [Your model name and version]\r\n**Date:** [Current date]\r\n**Task:** CODE_REVIEW\r\n---\r\n\r\n## PART 1: EXISTING FEATURES\r\n1. Create an ORDERED LIST of existing features found in the code, ranked by Rating (1-10) from highest to lowest.\r\n2. Follow the list with a TABLE summarizing these features with columns: Name, Description, Value (Benefit), Rating (1-10), Risk (1-10).\r\n3. Include ALL existing features identified in the list in this table.\r\n\r\n## PART 2: SUGGESTIONS FOR IMPROVEMENT\r\n4. Create an ORDERED LIST of suggested improvements/enhancements, ranked by Rating (1-10) from highest to lowest.\r\n5. Follow the list with a TABLE summarizing these suggestions with columns: Name, Description, Value (Benefit), Rating (1-10), Risk (1-10).\r\n6. Include ALL suggestions identified in the list in this table.`;\r\n\r\nconst SYNTHESIZE_PROMPT = `SYNTHESIS TASK\r\nI have conducted multiple Code Reviews using different LLMs. Below are the Code Review responses.\r\nPlease SYNTHESIZE these responses into a single, authoritative Code Review.\r\nOutput format: Standard Markdown (.md) inside a SINGLE code block.\r\n\r\n**AGENT IDENTIFICATION REQUIRED**\r\nStart your response with a metadata header identifying yourself:\r\n\r\n---\r\n**Agent:** [Your model name and version]\r\n**Date:** [Current date]\r\n**Task:** SYNTHESIZE\r\n---\r\n\r\n## PART 1: SYNTHESIZED EXISTING FEATURES\r\n1. Review all PART 1 (EXISTING FEATURES) sections from the provided Code Reviews.\r\n2. Create a consolidated ORDERED LIST of all unique existing features, ranked by Rating (1-10) from highest to lowest.\r\n   - Merge duplicate features, keeping the highest rating and best description\r\n   - Resolve conflicts by prioritizing the most detailed/accurate description\r\n3. Follow the list with a TABLE summarizing these synthesized features with columns: Name, Description, Value (Benefit), Rating (1-10), Risk (1-10).\r\n4. Include ALL unique features identified across all reviews in this table.\r\n\r\n## PART 2: SYNTHESIZED SUGGESTIONS FOR IMPROVEMENT\r\n5. Review all PART 2 (SUGGESTIONS FOR IMPROVEMENT) sections from the provided Code Reviews.\r\n6. Create a consolidated ORDERED LIST of all unique suggestions, ranked by Rating (1-10) from highest to lowest.\r\n   - Merge duplicate suggestions, keeping the highest rating and most comprehensive description\r\n   - Resolve conflicts by prioritizing the most actionable/valuable suggestion\r\n7. Follow the list with a TABLE summarizing these synthesized suggestions with columns: Name, Description, Value (Benefit), Rating (1-10), Risk (1-10).\r\n8. Include ALL unique suggestions identified across all reviews in this table.\r\n\r\n## CONCLUSION\r\n9. Provide a brief summary highlighting:\r\n   - The most important features identified\r\n   - The highest-priority suggestions for improvement\r\n   - Any consensus or disagreements across the reviews`;\r\n\r\nconst CONSOLIDATE_PROMPT = `CONSOLIDATION TASK\r\nI have multiple Synthesized Code Reviews from different synthesis runs. Below are the Synthesize outputs.\r\nPlease create a FINAL MASTER CONSOLIDATION that combines all of these into one authoritative document.\r\nOutput format: Standard Markdown (.md) inside a SINGLE code block.\r\n\r\n**AGENT IDENTIFICATION REQUIRED**\r\nStart your response with a metadata header identifying yourself:\r\n\r\n---\r\n**Agent:** [Your model name and version]\r\n**Date:** [Current date]\r\n**Task:** CONSOLIDATE\r\n---\r\n\r\n## PART 1: MASTER EXISTING FEATURES\r\n1. Review all PART 1 (SYNTHESIZED EXISTING FEATURES) sections from all Synthesize outputs.\r\n2. Create a FINAL consolidated ORDERED LIST of all unique features, ranked by Rating (1-10) from highest to lowest.\r\n   - Merge all features, keeping the highest rating and most comprehensive description\r\n   - Remove true duplicates (same feature, same description)\r\n   - Resolve conflicts by prioritizing the most detailed/accurate description\r\n   - Focus on the most important/valuable features\r\n3. Follow the list with a MASTER TABLE summarizing these final features with columns: Name, Description, Value (Benefit), Rating (1-10), Risk (1-10).\r\n4. Include ALL unique features in this master table.\r\n\r\n## PART 2: MASTER SUGGESTIONS FOR IMPROVEMENT\r\n5. Review all PART 2 (SYNTHESIZED SUGGESTIONS FOR IMPROVEMENT) sections from all Synthesize outputs.\r\n6. Create a FINAL consolidated ORDERED LIST of all unique suggestions, ranked by Rating (1-10) from highest to lowest.\r\n   - Merge all suggestions, keeping the highest rating and most actionable description\r\n   - Remove true duplicates\r\n   - Resolve conflicts by prioritizing the most valuable/actionable suggestion\r\n   - Focus on high-impact, implementable improvements\r\n7. Follow the list with a MASTER TABLE summarizing these final suggestions with columns: Name, Description, Value (Benefit), Rating (1-10), Risk (1-10).\r\n8. Include ALL unique suggestions in this master table.\r\n\r\n## MASTER CONCLUSION\r\n9. Provide an executive summary that:\r\n   - Highlights the top 5 most important features\r\n   - Highlights the top 5 highest-priority suggestions\r\n   - Identifies patterns and consensus across all synthesis runs\r\n   - Provides actionable next steps for implementation`;\r\n\r\n/**\r\n * Preloaded prompts available in the widget\r\n */\r\nexport const PRELOADED_PROMPTS: Record<string, PreloadedPrompt> = {\r\n  '0001': {\r\n    key: '0001',\r\n    name: 'CODE_REVIEW',\r\n    label: 'Code Review',\r\n    text: CODE_REVIEW_PROMPT,\r\n    estimatedTokens: 950,\r\n    description: 'Analyzes single code file \u2192 features + suggestions',\r\n  },\r\n  '0002': {\r\n    key: '0002',\r\n    name: 'SYNTHESIZE',\r\n    label: 'Synthesize',\r\n    text: SYNTHESIZE_PROMPT,\r\n    estimatedTokens: 1300,\r\n    description: 'Merges multiple reviews \u2192 authoritative review',\r\n  },\r\n  '0003': {\r\n    key: '0003',\r\n    name: 'CONSOLIDATE',\r\n    label: 'Consolidate',\r\n    text: CONSOLIDATE_PROMPT,\r\n    estimatedTokens: 1300,\r\n    description: 'Creates final master review from multiple syntheses',\r\n  },\r\n};\r\n\r\n/**\r\n * Get prompt by key\r\n */\r\nexport function getPrompt(key: string): PreloadedPrompt | undefined {\r\n  return PRELOADED_PROMPTS[key];\r\n}\r\n\r\n/**\r\n * Get all available prompts\r\n */\r\nexport function getAllPrompts(): PreloadedPrompt[] {\r\n  return Object.values(PRELOADED_PROMPTS);\r\n}\r\n", "import { Workflow, WorkflowExport } from '../types';\r\nimport { estimateTokens } from './tokenEstimator';\r\n\r\n/**\r\n * Generate structured JSON export for workflow\r\n * Includes prompt, attachments with content, and metadata\r\n * Optimized for agent consumption\r\n */\r\nexport function generateJSON(workflow: Workflow): string {\r\n  if (!workflow.selectedPrompt || workflow.attachments.length === 0) {\r\n    throw new Error('Cannot export: missing prompt or attachments');\r\n  }\r\n\r\n  const promptTokens = estimateTokens(workflow.selectedPrompt.text);\r\n  const attachmentTokensPerFile: Record<string, number> = {};\r\n  let totalAttachmentTokens = 0;\r\n\r\n  const exportAttachments = workflow.attachments.map((attachment) => {\r\n    const tokens = estimateTokens(attachment.content || '');\r\n    attachmentTokensPerFile[attachment.filename] = tokens;\r\n    totalAttachmentTokens += tokens;\r\n\r\n    return {\r\n      id: attachment.id,\r\n      filename: attachment.filename,\r\n      type: attachment.type,\r\n      extension: attachment.extension,\r\n      language: attachment.language,\r\n      size: attachment.size,\r\n      content: attachment.content || '',\r\n    };\r\n  });\r\n\r\n  const totalTokens = promptTokens + totalAttachmentTokens;\r\n\r\n  const exportData: WorkflowExport = {\r\n    session_id: `session_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\r\n    generated_at: new Date().toISOString(),\r\n    prompt: workflow.selectedPrompt,\r\n    attachments: exportAttachments,\r\n    metadata: {\r\n      total_tokens: totalTokens,\r\n      estimated_tokens_per_file: attachmentTokensPerFile,\r\n      file_count: workflow.attachments.length,\r\n      attachment_types: Array.from(new Set(workflow.attachments.map((a) => a.type))),\r\n      created_at: new Date().toISOString(),\r\n      user_instructions: 'Add your analysis and suggestions below this prompt and attachments',\r\n    },\r\n  };\r\n\r\n  return JSON.stringify(exportData, null, 2);\r\n}\r\n\r\n/**\r\n * Generate human-readable Markdown export for workflow\r\n * Includes prompt text and code blocks for each attachment\r\n */\r\nexport function generateMarkdown(workflow: Workflow): string {\r\n  if (!workflow.selectedPrompt || workflow.attachments.length === 0) {\r\n    throw new Error('Cannot export: missing prompt or attachments');\r\n  }\r\n\r\n  let markdown = `# ${workflow.selectedPrompt.label} Workflow\\n\\n`;\r\n\r\n  // Prompt section\r\n  markdown += `## Prompt\\n\\n`;\r\n  markdown += `**Task:** ${workflow.selectedPrompt.name}\\n`;\r\n  markdown += `**Estimated Tokens:** ~${estimateTokens(workflow.selectedPrompt.text).toLocaleString()}\\n\\n`;\r\n  markdown += `${workflow.selectedPrompt.text}\\n\\n`;\r\n\r\n  // Attachments section\r\n  markdown += `## Attachments\\n\\n`;\r\n\r\n  workflow.attachments.forEach((attachment) => {\r\n    const sizeKB = (attachment.size / 1024).toFixed(1);\r\n    markdown += `### ${attachment.filename} (${sizeKB}KB)\\n\\n`;\r\n\r\n    if (attachment.isBinary) {\r\n      markdown += `> Binary file - content cannot be embedded in markdown\\n\\n`;\r\n    } else if (attachment.content) {\r\n      const language = attachment.language || 'plaintext';\r\n      markdown += `\\`\\`\\`${language}\\n`;\r\n      markdown += `${attachment.content}\\n`;\r\n      markdown += `\\`\\`\\`\\n\\n`;\r\n    } else {\r\n      markdown += `> [File content not extracted]\\n\\n`;\r\n    }\r\n  });\r\n\r\n  // Metadata section\r\n  const totalTokens = workflow.attachments.reduce((sum, a) => sum + estimateTokens(a.content || ''), 0) +\r\n    estimateTokens(workflow.selectedPrompt.text);\r\n\r\n  markdown += `## Metadata\\n\\n`;\r\n  markdown += `- **Task:** ${workflow.selectedPrompt.name}\\n`;\r\n  markdown += `- **Files:** ${workflow.attachments.length}\\n`;\r\n  markdown += `- **Total Tokens:** ~${totalTokens.toLocaleString()}\\n`;\r\n  markdown += `- **Created:** ${new Date().toLocaleString()}\\n`;\r\n  markdown += `- **Languages:** ${Array.from(new Set(workflow.attachments.map((a) => a.language).filter(Boolean))).join(', ') || 'N/A'}\\n\\n`;\r\n\r\n  // Instructions\r\n  markdown += `## Instructions for LLM\\n\\n`;\r\n  markdown += `1. Review the prompt above to understand the task\\n`;\r\n  markdown += `2. Analyze the attached files in the Attachments section\\n`;\r\n  markdown += `3. Provide your analysis below\\n\\n`;\r\n\r\n  markdown += `---\\n\\n`;\r\n  markdown += `## Your Analysis\\n\\n`;\r\n  markdown += `[Add your analysis and suggestions here]\\n`;\r\n\r\n  return markdown;\r\n}\r\n", ".container {\r\n  width: 100%;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 24px;\r\n  background: #0a0a0a;\r\n  color: #ffffff;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,\r\n    sans-serif;\r\n}\r\n\r\n.header {\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.title {\r\n  font-size: 32px;\r\n  font-weight: 700;\r\n  color: #ffffff;\r\n  margin: 0 0 8px 0;\r\n  letter-spacing: -0.5px;\r\n}\r\n\r\n.subtitle {\r\n  font-size: 16px;\r\n  color: #888888;\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n}\r\n\r\n.exportSection {\r\n  padding: 24px;\r\n  background: #1a1a1a;\r\n  border-radius: 8px;\r\n  border: 1px solid #333333;\r\n}\r\n\r\n.sectionTitle {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin: 0 0 16px 0;\r\n}\r\n\r\n.warningText {\r\n  margin-top: 16px;\r\n  padding: 12px 16px;\r\n  background: rgba(255, 153, 51, 0.1);\r\n  border-left: 3px solid #FF9933;\r\n  color: #FF9933;\r\n  font-size: 14px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.pasteResultButton {\r\n  margin-top: 16px;\r\n  padding: 12px 20px;\r\n  background: #333333;\r\n  color: #ffffff;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  font-family: inherit;\r\n}\r\n\r\n.pasteResultButton:hover {\r\n  background: #444444;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n/* Responsive adjustments */\r\n@media (max-width: 768px) {\r\n  .container {\r\n    padding: 16px;\r\n  }\r\n\r\n  .title {\r\n    font-size: 24px;\r\n  }\r\n\r\n  .subtitle {\r\n    font-size: 14px;\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["import_react", "import_react", "container", "title", "subtitle", "promptGrid", "promptCard", "selected", "promptHeader", "promptName", "tokenBadge", "promptDescription", "promptMeta", "promptKey", "tokenCount", "selectedInfo", "selectedText", "import_react", "dropZone", "drag", "loading", "success", "error", "disabled", "content", "icon", "spinner", "spin", "message", "hint", "import_jsx_runtime", "import_react", "import_react", "overlay", "modal", "header", "title", "closeButton", "body", "formGroup", "label", "input", "textarea", "hint", "footer", "cancelButton", "submitButton", "import_jsx_runtime", "container", "title", "actions", "pasteButton", "clearButton", "summary", "summaryItem", "summaryLabel", "summaryValue", "attachmentList", "listTitle", "attachmentItem", "attachmentHeader", "attachmentIcon", "attachmentInfo", "attachmentName", "attachmentMeta", "removeButton", "attachmentPreview", "import_jsx_runtime", "import_react", "container", "title", "grid", "card", "cardTitle", "promptInfo", "promptLabel", "promptTokens", "empty", "stats", "stat", "statLabel", "statValue", "tokenCount", "warning", "tokenBreakdown", "sectionTitle", "languages", "fileTypes", "languageBadges", "fileTypeBadges", "languageBadge", "fileTypeBadge", "warningBox", "warningText", "warningHint", "emptyState", "emptyText", "import_jsx_runtime", "import_react", "container", "button", "primary", "secondary", "menuWrapper", "menu", "menuItem", "icon", "message", "import_jsx_runtime", "import_react", "overlay", "modal", "header", "title", "closeButton", "body", "description", "formGroup", "label", "textarea", "hint", "footer", "cancelButton", "saveButton", "import_jsx_runtime", "import_react", "import_react", "container", "header", "title", "subtitle", "content", "exportSection", "sectionTitle", "warningText", "pasteResultButton", "import_jsx_runtime", "React"]
}
