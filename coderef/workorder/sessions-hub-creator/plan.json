{
  "META_DOCUMENTATION": {
    "feature_name": "sessions-hub-creator",
    "workorder_id": "WO-SESSIONS-HUB-CREATOR-002",
    "version": "1.0.0",
    "status": "completed",
    "generated_by": "PlanningGenerator",
    "has_context": true,
    "has_analysis": false,
    "uds": {
      "generated_by": "coderef-workflow v2.0.0",
      "document_type": "Implementation Plan",
      "last_updated": "2026-01-11",
      "ai_assistance": true,
      "next_review": "2026-02-10"
    }
  },
  "UNIVERSAL_PLANNING_STRUCTURE": {
    "0_preparation": {
      "foundation_docs": {
        "available": [],
        "missing": [
          "Run /analyze-for-planning to discover docs"
        ]
      },
      "coding_standards": {
        "available": [],
        "missing": [
          "Run /analyze-for-planning to discover standards"
        ]
      },
      "reference_components": {
        "primary": "Unknown",
        "secondary": []
      },
      "key_patterns_identified": [
        "Run /analyze-for-planning to identify patterns"
      ],
      "technology_stack": {
        "languages": [],
        "frameworks": [],
        "key_libraries": []
      },
      "gaps_and_risks": [
        "Missing project analysis - run /analyze-for-planning first"
      ]
    },
    "1_executive_summary": {
      "purpose": "Build Session Creation system (Sprints 1-4): Interactive wizard for creating multi-agent sessions from stubs with freeform instructions, context attachments, agent assignment, and session file generation including context-backbone.md",
      "value_proposition": "Enable users to create multi-agent sessions through a UI wizard that generates comprehensive context packages (15,000+ line context-backbone.md) ensuring agents have perfect context on first try",
      "real_world_analogy": "Similar to building sessions-hub-creator - systematically implementing each requirement to deliver complete functionality",
      "use_case": "User requests sessions-hub-creator → System implements: Stub selection interface with search/filter (hardcoded stubs: STUB-082, 054, 055, 056, 057), Multi-block instruction editor with type tags (task/guideline/example/constraint) and markdown support, Attachment manager for foundation docs and archived features (reuse PromptingWorkflow AttachmentManager) → Feature is functional",
      "output": "Implemented 6 requirements: Stub selection interface with search/filter (hardcoded stubs: STUB-082, 054, 055, 056, 057), Multi-block instruction editor with type tags (task/guideline/example/constraint) and markdown support, Attachment manager for foundation docs and archived features (reuse PromptingWorkflow AttachmentManager)"
    },
    "2_risk_assessment": {
      "overall_risk": "medium",
      "complexity": "medium (estimated 5-15 files, 200-1000 lines)",
      "scope": "Estimated 6 requirements affecting multiple components",
      "file_system_risk": "low (standard code changes only)",
      "dependencies": [
        "Cannot modify SessionMonitoring/ directory (Agent 2's territory)",
        "Cannot modify packages/dashboard/src/lib/api/sessions.ts (Agent 2's file)",
        "Must follow Phase 1 design specs from dashboard-audit-v2.md",
        "Must reuse AttachmentManager from PromptingWorkflow/ (proven code reuse)",
        "Must use Next.js 16 App Router conventions with 'use client' directive",
        "Must use Tailwind CSS with ind-* design tokens",
        "Must save session files to .coderef/sessions/{feature-name}/ directory",
        "Context backbone generation must handle 15,000-20,000 line files (progressive generation with streaming)"
      ],
      "performance_concerns": [
        "No significant performance concerns identified - monitor during implementation"
      ],
      "security_considerations": [
        "Follow existing security patterns - review during implementation"
      ],
      "breaking_changes": "none (extending existing functionality)"
    },
    "3_current_state_analysis": {
      "affected_files": [
        "Identify during implementation based on feature scope"
      ],
      "dependencies": {
        "existing_internal": [
          "Existing modules and components - identify during implementation"
        ],
        "existing_external": [
          "Standard project dependencies"
        ],
        "new_external": [],
        "new_internal": []
      },
      "architecture_context": "Standard implementation following existing project architecture and patterns"
    },
    "4_key_features": {
      "primary_features": [
        "Stub selection interface with search/filter (hardcoded stubs: STUB-082, 054, 055, 056, 057)",
        "Multi-block instruction editor with type tags (task/guideline/example/constraint) and markdown support",
        "Attachment manager for foundation docs and archived features (reuse PromptingWorkflow AttachmentManager)",
        "Context discovery algorithm with keyword matching and relevance scoring (suggest files >= 90%)",
        "Agent assignment with drag-and-drop for splitting instructions/attachments across multiple agents"
      ],
      "secondary_features": [
        "Session file generation: context-backbone.md (15K+ lines), context-index.json, communication.json (DRAFT), instructions.json (DRAFT), agent-prompts/*.md"
      ],
      "edge_case_handling": [
        "Empty or null input validation",
        "Invalid input error handling",
        "Boundary conditions and limits"
      ],
      "configuration_options": [
        "None"
      ]
    },
    "5_task_id_system": {
      "tasks": [
        "SETUP-001: Create initial project structure and setup development environment with required dependencies",
        "LOGIC-001: Implement Stub selection interface with search/filter (hardcoded stubs: STUB-082, 054, 055, 056, 057) following existing project patterns and architecture",
        "LOGIC-002: Implement Multi-block instruction editor with type tags (task/guideline/example/constraint) and markdown support following existing project patterns and architecture",
        "LOGIC-003: Implement Attachment manager for foundation docs and archived features (reuse PromptingWorkflow AttachmentManager) following existing project patterns and architecture",
        "LOGIC-004: Implement Context discovery algorithm with keyword matching and relevance scoring (suggest files >= 90%) following existing project patterns and architecture",
        "LOGIC-005: Implement Agent assignment with drag-and-drop for splitting instructions/attachments across multiple agents following existing project patterns and architecture",
        "TEST-001: Write unit tests for all new functionality with minimum 80% code coverage",
        "TEST-002: Write integration tests to verify end-to-end functionality and component interactions",
        "DOC-001: Update documentation including README, API docs, and inline code comments for all public interfaces"
      ]
    },
    "6_implementation_phases": {
      "phases": [
        {
          "phase": 1,
          "name": "Sprint 1: Stub Selection + Instruction Editor",
          "description": "Implement stub selection UI with search/filter and multi-block instruction editor with type tags",
          "tasks": [
            {
              "id": "SPRINT1-001",
              "title": "Create SessionCreation types and interfaces",
              "description": "Create types.ts with Stub, InstructionBlock, BlockType, AgentAssignment, SessionBuilderState interfaces. Import Attachment type from PromptingWorkflow.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/types.ts"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT1-002",
              "title": "Create StubSelector component",
              "description": "Create StubSelector.tsx with 5 hardcoded stubs (STUB-082, 054, 055, 056, 057). Implement search/filter by ID, name, description. Card-based UI with priority colors and category icons. Selection state management.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/StubSelector.tsx"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT1-003",
              "title": "Create InstructionBlock component",
              "description": "Create InstructionBlock.tsx for individual blocks. Type selector (task/guideline/example/constraint) with color-coded borders (green/blue/purple/orange). Drag handle, character count, remove button.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/InstructionBlock.tsx"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT1-004",
              "title": "Create InstructionEditor component",
              "description": "Create InstructionEditor.tsx for managing multiple instruction blocks. Add/update/remove/reorder functionality. Markdown preview toggle. Token estimation (chars/4). Stats footer.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/InstructionEditor.tsx"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT1-005",
              "title": "Create SessionCreation container component",
              "description": "Create SessionCreation/index.tsx container. State management for stub, blocks, attachments, agents. Form validation (stub required, >=1 block, no empty blocks). Progress indicator (4 steps). Error display.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/index.tsx"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT1-006",
              "title": "Create /sessions/create page route",
              "description": "Create packages/dashboard/src/app/sessions/create/page.tsx that renders SessionCreation component.",
              "files": [
                "packages/dashboard/src/app/sessions/create/page.tsx"
              ],
              "status": "completed"
            }
          ],
          "deliverables": [
            "StubSelector with search and 5 hardcoded stubs",
            "InstructionEditor with multi-block support",
            "InstructionBlock with type tags and color coding",
            "SessionCreation container with validation",
            "/sessions/create page route"
          ]
        },
        {
          "phase": 2,
          "name": "Sprint 2: Attachment System + Context Discovery",
          "description": "Integrate AttachmentManager from PromptingWorkflow and implement context discovery API with keyword matching",
          "tasks": [
            {
              "id": "SPRINT2-001",
              "title": "Integrate AttachmentManager component",
              "description": "Import AttachmentManager from PromptingWorkflow. Add attachment handlers (add, remove, clear). Integrate into SessionCreation with conditional rendering after stub + instructions.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/index.tsx",
                "packages/dashboard/src/components/SessionsHub/SessionCreation/types.ts"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT2-002",
              "title": "Create /api/sessions/context-discovery route",
              "description": "Create API route for context discovery. Scan project for foundation docs (ARCHITECTURE.md, SCHEMA.md, etc.) and archived features. Implement keyword matching algorithm with relevance scoring (0-100). Return files with scores >= 90%.",
              "files": [
                "packages/dashboard/src/app/api/sessions/context-discovery/route.ts"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT2-003",
              "title": "Create ContextDiscovery UI component",
              "description": "Create ContextDiscovery.tsx component. Display suggested files with relevance scores. Auto-select files >= 90%. Allow user to accept/reject suggestions. Preview file content in modal.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/ContextDiscovery.tsx"
              ],
              "status": "completed"
            }
          ],
          "deliverables": [
            "AttachmentManager integrated and functional",
            "Context discovery API with keyword matching",
            "Context discovery UI with relevance scores"
          ]
        },
        {
          "phase": 3,
          "name": "Sprint 3: Agent Assignment System",
          "description": "Implement agent assignment interface with instruction/attachment splitting and dependency management",
          "tasks": [
            {
              "id": "SPRINT3-001",
              "title": "Create AgentCard component",
              "description": "Create AgentCard.tsx to display individual agent info (agent_id, role, status). Drop zone for blocks/attachments. List assigned items. Remove assignment button.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/AgentCard.tsx"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT3-002",
              "title": "Create AgentAssigner component",
              "description": "Create AgentAssigner.tsx with checkbox interface for assigning instruction blocks to agents. Assign attachments to agents (context filtering). Specify output files per agent. Orchestrator auto-assignment (receives ALL context).",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/AgentAssigner.tsx"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT3-003",
              "title": "Implement agent assignment validation",
              "description": "Add validation logic to ensure all instruction blocks are assigned to at least one agent. Display validation errors. Disable Next button until validation passes.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/index.tsx"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT3-004",
              "title": "Create DependencyManager component",
              "description": "Create DependencyManager.tsx for defining agent dependencies (Agent B waits for Agent A). Visual graph of dependencies. Cycle detection to prevent circular dependencies. Export to communication.json format.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/DependencyManager.tsx"
              ],
              "status": "completed"
            }
          ],
          "deliverables": [
            "AgentAssigner with checkbox interface",
            "Agent assignment validation",
            "DependencyManager with cycle detection"
          ]
        },
        {
          "phase": 4,
          "name": "Sprint 4: Session Generation",
          "description": "Implement session file generation with context-backbone.md (15K+ lines) and supporting files",
          "tasks": [
            {
              "id": "SPRINT4-001",
              "title": "Create SessionGenerator component",
              "description": "Create SessionGenerator.tsx with file preview before creation. Edit generated files (advanced users). Display progress during generation.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/SessionGenerator.tsx"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT4-002",
              "title": "Create /api/sessions/create route",
              "description": "Create API route for session generation. Accept stub, instructions, attachments, agents, dependencies. Generate all session files. Save to .coderef/sessions/{feature-name}/. Return success with file paths.",
              "files": [
                "packages/dashboard/src/app/api/sessions/create/route.ts"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT4-003",
              "title": "Implement context-backbone.md generation",
              "description": "Generate comprehensive context-backbone.md (15,000-20,000 lines). Combine: original stub + all instructions + all attachments. Progressive generation with streaming. Include: Session Overview, Original Stub, Agent Instructions, Context Attachments, Agent Assignment Map.",
              "files": [
                "packages/dashboard/src/app/api/sessions/create/lib/generateContextBackbone.ts"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT4-004",
              "title": "Implement communication.json generation",
              "description": "Generate communication.json (DRAFT) with stub reference, agent roster, assignments, dependencies. Use template structure from Phase 1 design.",
              "files": [
                "packages/dashboard/src/app/api/sessions/create/lib/generateCommunication.ts"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT4-005",
              "title": "Implement instructions.json generation",
              "description": "Generate instructions.json (DRAFT) with per-agent instructions. Include orchestrator instructions. Format matches Phase 1 design spec.",
              "files": [
                "packages/dashboard/src/app/api/sessions/create/lib/generateInstructions.ts"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT4-006",
              "title": "Implement agent-prompts generation",
              "description": "Generate agent-prompts/*.md files (one-liner prompts). One file per agent. Copy-to-clipboard functionality.",
              "files": [
                "packages/dashboard/src/app/api/sessions/create/lib/generateAgentPrompts.ts"
              ],
              "status": "completed"
            },
            {
              "id": "SPRINT4-007",
              "title": "Create SessionCreationComplete component",
              "description": "Create SessionCreationComplete.tsx success screen. Display session directory path, files created. 'Open Session Monitor' button (navigate to Agent 2's component). 'Create Another Session' button (reset form). Copy-to-clipboard for agent prompts.",
              "files": [
                "packages/dashboard/src/components/SessionsHub/SessionCreation/SessionCreationComplete.tsx"
              ],
              "status": "completed"
            }
          ],
          "deliverables": [
            "SessionGenerator with file preview",
            "Session creation API with progressive generation",
            "context-backbone.md (15K+ lines)",
            "communication.json (DRAFT)",
            "instructions.json (DRAFT)",
            "agent-prompts/*.md",
            "SessionCreationComplete success screen"
          ]
        }
      ]
    },
    "7_testing_strategy": {
      "unit_tests": [
        "Test individual functions and methods in isolation",
        "Verify input validation and error handling",
        "Test edge cases and boundary conditions",
        "Achieve minimum 80% code coverage"
      ],
      "integration_tests": [
        "Test component interactions and data flow",
        "Verify end-to-end functionality",
        "Test integration with existing systems"
      ],
      "end_to_end_tests": [
        "Not applicable"
      ],
      "edge_case_scenarios": [
        {
          "scenario": "Empty or null input provided",
          "setup": "Call function with None or empty string",
          "expected_behavior": "Function validates input and returns appropriate error",
          "verification": "Assert error message and status code",
          "error_handling": "ValueError or ValidationError"
        },
        {
          "scenario": "Invalid input format provided",
          "setup": "Call function with malformed or incorrect data type",
          "expected_behavior": "Function validates input type and returns error",
          "verification": "Assert error message indicates invalid format",
          "error_handling": "TypeError or ValidationError"
        },
        {
          "scenario": "Boundary conditions at limits",
          "setup": "Test with minimum and maximum allowed values",
          "expected_behavior": "Function handles boundary values correctly",
          "verification": "Assert results are within expected range",
          "error_handling": "No error expected for valid boundaries"
        }
      ]
    },
    "8_success_criteria": {
      "functional_requirements": [
        {
          "requirement": "Feature implementation complete",
          "metric": "All requirements implemented",
          "target": "100% of specified requirements",
          "validation": "Manual verification against requirements list"
        },
        {
          "requirement": "Integration successful",
          "metric": "Feature works with existing system",
          "target": "No breaking changes to existing functionality",
          "validation": "Run full test suite"
        },
        {
          "requirement": "Stub selection interface with search/filter (hardcoded stubs: STUB-082, 054, 055, 056, 057)",
          "metric": "Functionality verified",
          "target": "Works as specified",
          "validation": "Test cases for: Stub selection interface with search/filter (hardcoded stubs: STUB-082, 054, 055, 056, 057)"
        },
        {
          "requirement": "Multi-block instruction editor with type tags (task/guideline/example/constraint) and markdown support",
          "metric": "Functionality verified",
          "target": "Works as specified",
          "validation": "Test cases for: Multi-block instruction editor with type tags (task/guideline/example/constraint) and markdown support"
        },
        {
          "requirement": "Attachment manager for foundation docs and archived features (reuse PromptingWorkflow AttachmentManager)",
          "metric": "Functionality verified",
          "target": "Works as specified",
          "validation": "Test cases for: Attachment manager for foundation docs and archived features (reuse PromptingWorkflow AttachmentManager)"
        }
      ],
      "quality_requirements": [
        {
          "requirement": "Code coverage",
          "metric": "Line coverage",
          "target": ">80%",
          "validation": "Run coverage tool"
        },
        {
          "requirement": "Code quality",
          "metric": "Linter passes",
          "target": "Zero linting errors",
          "validation": "Run linter"
        },
        {
          "requirement": "Type safety",
          "metric": "Type checker passes",
          "target": "Zero type errors",
          "validation": "Run type checker"
        }
      ],
      "performance_requirements": [
        {
          "requirement": "Response time",
          "metric": "Execution time",
          "target": "< 1 second for typical operations",
          "validation": "Performance tests"
        }
      ],
      "security_requirements": [
        {
          "requirement": "Input validation",
          "metric": "All inputs validated",
          "target": "100% validation coverage",
          "validation": "Security review"
        }
      ]
    },
    "9_implementation_checklist": {
      "pre_implementation": [
        "☐ Review complete plan for gaps or ambiguities",
        "☐ Verify all requirements are clear and testable",
        "☐ Set up development environment with required dependencies"
      ],
      "phase_1": [
        "☐ SETUP-001: Create initial project structure and setup development environment with required dependencies"
      ],
      "phase_2": [
        "☐ LOGIC-001: Implement core feature functionality following existing project patterns and architecture"
      ],
      "phase_3": [
        "☐ TEST-001: Write unit tests for all new functionality with minimum 80% code coverage",
        "☐ TEST-002: Write integration tests to verify end-to-end functionality and component interactions"
      ],
      "phase_4": [
        "☐ DOC-001: Update documentation including README, API docs, and inline code comments for all public interfaces"
      ],
      "finalization": [
        "☐ All tests passing (unit + integration)",
        "☐ Code review completed and approved",
        "☐ Documentation updated and complete",
        "☐ Changelog entry created with version bump",
        "☐ Final verification against success criteria"
      ]
    }
  }
}